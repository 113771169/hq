<?xml version="1.0"?>
<!-- standard include for process metrics -->
<!DOCTYPE plugin [
  <!ENTITY process-metrics SYSTEM "/pdk/plugins/process-metrics.xml">
]>
<plugin package="com.vmware.springsource.hyperic.plugin.gemfire">
    <classpath>
        <include name="pdk/lib/mx4j" />
    </classpath>

    <!--metrics name="GemFireMetrics">
        <metric name="cacheListenerCallsCompleted" category="UTILIZATION" collectionType="trendsup" indicator="true" interval="60000" />
        <metric name="creates" category="UTILIZATION" collectionType="trendsup" indicator="true" interval="60000" />
        <metric name="puts" category="UTILIZATION" collectionType="trendsup" indicator="true" interval="60000" />
        <metric name="misses" category="UTILIZATION" collectionType="trendsup" indicator="true" interval="60000" />
        <metric name="loadsCompleted" category="UTILIZATION" collectionType="trendsup" indicator="true" interval="60000" />
        <metric name="gets" category="UTILIZATION" collectionType="trendsup" indicator="true" interval="60000" />
        <metric name="entries" category="UTILIZATION" collectionType="trendsup" indicator="true" interval="60000" />
        <metric name="destroys" category="UTILIZATION" collectionType="trendsup" indicator="true" interval="60000" />
        <metric name="distributionStats,deserializations" collectionType="trendsup" category="UTILIZATION" indicator="true" interval="60000" />
    </metrics-->



    <platform name="GemFire Distributed System">
        <plugin type="autoinventory" class="GemfirePlatformDetector"/>
        <plugin type="measurement" class="org.hyperic.hq.product.MeasurementPlugin" />
        <plugin type="collector" class="GemfireCollector" />
        <plugin type="livedata" class="GemFireLiveData" />
        <config type="measurement">
            <option name="jmx.url"
			        description="JMX URL to GemFire Agent"
				    default="service:jmx:rmi://localhost/jndi/rmi://:1099/jmxconnector" />
            <option name="jmx.username"
			        description="JMX username"
				    optional="true" default="" />
            <option name="jmx.password"
			        description="JMX password"
				    optional="true" default="" />
        </config>
        <filter name="template" value="GemFire:jmx.url=%jmx.url%:${alias}"/>
        <metrics>
            <metric name="Availability" indicator="true" />
            <metric name="Cache Servers"     alias="n_caches"   indicator="true" />
            <metric name="Applications Peer" alias="n_apps"     indicator="true" />
            <metric name="Gateway Hubs"      alias="n_gateways" indicator="true" />
        </metrics>
        <!--server name="JMX Agent" version="6.5">
            <plugin type="autoinventory" class="JMXAgentDetector" />
            <plugin type="measurement" class="MemberMeasurement" />
            <filter name="template" value="GemFire::${alias}"/>
            <metrics>
                <metric name="Availability"  indicator="true" />
            </metrics>
        </server-->
        <server name="Cache Server">
            <plugin type="autoinventory" class="CacheServerDetector" />
            <plugin type="measurement" class="org.hyperic.hq.product.MeasurementPlugin" />
            <plugin type="collector" class="MemberCollector" />
         <plugin type="livedata" class="GemFireLiveData" />
           <config type="measurement">
                <option name="memberID" description="Cache Server Id"/>
            </config>
            <filter name="template" value="GemFire:jmx.url=%jmx.url%,memberID=%memberID%:${alias}"/>
            <metrics>
                <metric name="Availability"  indicator="true" />
                <metric name="Used Memory" alias="memory" indicator="true" />
                <metric name="Used CPU" alias="cpu" indicator="true" />
            </metrics>
            <service name="Region">
                <plugin type="measurement" class="org.hyperic.hq.product.MeasurementPlugin" />
                <plugin type="collector" class="RegionCollector" />
                <config type="measurement">
                    <option name="memberID" description="Cache Server Id"/>
                    <option name="regionID" description="Region Name"/>
                </config>
                <filter name="template" value="GemFire:hi=hola,jmx.url=%jmx.url%,memberID=%memberID%,regionID=%regionID%:${alias}"/>
                <metrics>
                    <metric name="Availability"  indicator="true" />
                    <metric name="Entry Count" alias="entry_count" indicator="true" />
                </metrics>
            </service>
        </server>
        <server name="Application Peer" include="Cache Server">
                 <plugin type="autoinventory" class="ApplicationServerDetector" />
        </server>
        <!--server name="Gateway Hub">
            <plugin type="autoinventory" class="GatewayServerDetector" />
            <plugin type="measurement" class="MemberMeasurement" />
            <filter name="template" value="GemFire::${alias}"/>
            <config type="measurement">
                <option name="Id" description="Cache Server Id"/>
            </config>
            <metrics>
                <metric name="Availability"  indicator="true" />
            </metrics>
        </server-->
    </platform>
</plugin>

