<?xml version="1.0"?>

<module id="hq.ajax" version="1.0.0" package="org.hyperic.hq.ui.contributions.ajax">
    
    <contribution configuration-id="tapestry.asset.UnprotectedAssets">
        <unprotected-resource contains="^/tap-dojo/" />
        <unprotected-resource contains="^/dojo/" />
    </contribution>

    <implementation service-id="tapestry.js.JavascriptManager">
        <invoke-factory>
            <construct class="org.apache.tapestry.javascript.JavascriptManagerImpl">
                <set-service property="assetSource" service-id="tapestry.asset.AssetSource"/>
                <set property="files" value="classpath:/dojo-0.4.3-custom-4.1.5/dojo.js"/>
                <set property="formFiles" value="classpath:/dojo-0.4.3-custom-4.1.5/dojo2.js"/>
                <set property="widgetFiles" value="classpath:/dojo-0.4.3-custom-4.1.5/dojo3.js"/>
                <set property="folder" value="classpath:/dojo-0.4.3-custom-4.1.5/"/>
                <set property="tapestryFile" value="classpath:/tapestry-4.1.5/core.js"/>
                <set property="tapestryFolder" value="classpath:/tapestry-4.1.5/"/>
            </construct>
        </invoke-factory>
    </implementation>  
    
    <service-point id="DojoDelegateFactory" interface="org.apache.hivemind.ServiceImplementationFactory"
        parameters-occurs="none">
        Constructs DojoOnePointOhShellDelegate.
        <invoke-factory>
            <construct class="DojoDelegateFactory" />
        </invoke-factory>
    </service-point>

    <service-point id="DojoOnePointOneShellDelegate" interface="org.apache.tapestry.IRender">
        <invoke-factory service-id="DojoDelegateFactory"/>
    </service-point>    

</module>