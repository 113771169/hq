<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 5.7 : HQApi Java API</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 5.7.html" title="vFabric Hyperic 5.7 Documentation Home">vFabric Hyperic 5.7 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 5.7 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-5.7.html">Hyperic 5.7 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 5.7 : HQApi Java API
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 04, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <p>The Java API is thoroughly documented in the JavaDocs that are included in the client download.  Usage of the Java API requires that hqapi1.jar as well as all libraries in the lib directory be included within the classpath.</p>

<p><b>API Classes</b></p>

<p>The entry point to the Java API is the <em>HQApi</em> class.  The constructor for this class takes a series of arguments that describes the connection to be made to HQ.  From the HQApi object, APIs to all HQ's subsystems may be accessed. </p>

<p><b>Return Objects</b></p>

<p>All APIs return response Objects that extend the <em>Response</em> class.  This class provides the caller information on the success or failure of the API call via the <em>getStatus()</em> method.  This can return one of <em>ResponseStatus.SUCCESS</em> or <em>ResponseStatus.FAILURE</em>.  On the case of failure, additional information on the reason for the failure may be obtained through <em>getError()</em>.  See the JavaDocs on the <em>Response</em> class for more information.</p>

<p>In general API calls will return 1 of 3 different types of responses:</p>

<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>Response Object</th>
<th class='confluenceTh'>Description</th>
</tr>
<tr>
<td class='confluenceTd'>StatusResponse</td>
<td class='confluenceTd'>Think of this as a <em>void</em> method signature.  The <em>StatusResponse</em> simply carries with it the base <em>Response</em> information on the success or failure of the API call.</td>
</tr>
<tr>
<td class='confluenceTd'>Single Object Response</td>
<td class='confluenceTd'>These methods return an object similar to the <em>StatusResponse</em>, but it also contains a single entity.  Examples of this include <em>UserResponse</em> and <em>ResourceResponse</em>.</td>
</tr>
<tr>
<td class='confluenceTd'>Multiple Object Response</td>
<td class='confluenceTd'> Again, this is similar to the single object response, but instead of a single object, a <em>List</em> of objects is returned.  Examples of this include <em>UsersResponse</em> and <em>ResourcesResponse</em>.</td>
</tr>
</tbody></table>
</div>


<p><b>Code Example</b></p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example: Create a new User</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">package org.hyperic.hq.hqapi1.test;

import org.hyperic.hq.hqapi1.HQApi;
import org.hyperic.hq.hqapi1.UserApi;
import org.hyperic.hq.hqapi1.types.User;
import org.hyperic.hq.hqapi1.types.UserResponse;
import org.hyperic.hq.hqapi1.types.Response;
import org.hyperic.hq.hqapi1.types.ResponseStatus;

public class Test {

    private static void assertSuccess(Response r) {
        if (!r.getStatus().equals(ResponseStatus.SUCCESS)) {
            System.err.println("Error :" + r.getError().getReasonText());
        } else {
            System.out.println("Command completed successfully");
        }
    }

    public static void main(String[] args) throws Exception {

        HQApi api = new HQApi("localhost", 7080, false, "hqadmin", "hqadmin");
        UserApi userApi = api.getUserApi();

        User newUser = new User();
        newUser.setName("hyperic");
        newUser.setFirstName("Hyperic");
        newUser.setLastName("HQ");
        newUser.setEmailAddress("support@hyperic.com");
        newUser.setHtmlEmail(true);

        UserResponse status = userApi.createUser(newUser, "hyperic");
        assertSuccess(status);
    }
}</pre>
		</div>
</div></div>

<p><b>Code Samples</b></p>

<p>There are no formal code samples included in the client download, however the test suite and tools packages provide many examples of API usage.</p>

<ul>
	<li>Test Suite &#8212; <a href="https://github.com/hyperic/hqapi/">https://github.com/hyperic/hqapi/</a></li>
	<li>Tools &#8212; <a href="https://github.com/hyperic/hqapi/">https://github.com/hyperic/hqapi/</a></li>
</ul>


				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Oct 01, 2012 10:07</font></td>
		    </tr>
	    </table>
    </body>
</html>
