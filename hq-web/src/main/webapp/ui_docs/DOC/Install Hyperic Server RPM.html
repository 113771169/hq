<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 5.7 : Install Hyperic Server RPM</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 5.7.html" title="vFabric Hyperic 5.7 Documentation Home">vFabric Hyperic 5.7 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 5.7 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-5.7.html">Hyperic 5.7 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 5.7 : Install Hyperic Server RPM
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 29, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <style type='text/css'>/*<![CDATA[*/
div.rbtoc1351527103353 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1351527103353 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1351527103353 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1351527103353'>
<ul>
    <li><a href='#InstallHypericServerRPM-AboutHypericServerRPM'>About Hyperic Server RPM</a></li>
    <li><a href='#InstallHypericServerRPM-ConfigureServerPropertiesFile'>Configure Server Properties File</a></li>
    <li><a href='#InstallHypericServerRPM-InstallHypericServer'>Install Hyperic Server</a></li>
<ul>
    <li><a href='#InstallHypericServerRPM-ConfigureHypericServerinPropertiesFileafterInstallation'>Configure Hyperic Server in Properties File after Installation</a></li>
</ul>
    <li><a href='#InstallHypericServerRPM-ConfigureLicense'>Configure License</a></li>
    <li><a href='#InstallHypericServerRPM-StarttheHypericServer'>Start the Hyperic Server</a></li>
    <li><a href='#InstallHypericServerRPM-AfterInstallingHypericServer'>After Installing Hyperic Server</a></li>
    <li><a href='#InstallHypericServerRPM-ServerPropertiesFileforRPMInstallation'>Server Properties File for RPM Installation</a></li>
</ul></div>
<blockquote><p><b>About this page...</b></p>

<p>This page has instructions for installing Hyperic Server 5.0 from a downloaded RPM to an RHEL 5 or RHEL 6 virtual machine</p>

<p>Before running the installer, see <a href="Hyperic Installation and Startup Process.html" title="Hyperic Installation and Startup Process">Hyperic Installation and Startup Process</a> for information about where server installation fits in the implementation process. For production environments, there are several steps to perform before installing the Hyperic Server, including database setup and SSL configuration.</p></blockquote>

<h1><a name="InstallHypericServerRPM-AboutHypericServerRPM"></a>About Hyperic Server RPM</h1>

<p>The name of the vFabric Hyperic Server RPM package is <tt>vFabric-hyperic-server-5.x.y.EE-1.x86_64.rpm</tt>.</p>

<p>You define server configuration options in a properties file, either before or after installation.</p>

<p>The installation owner and the installation group are both <tt>hyperic</tt>.</p>

<p>By default, yum will install the server in <tt>/opt/vmware/hyperic/server-current</tt>, where <tt>/opt/vmware/hyperic/server-current</tt> is a symbolic link to a sibling versioned directory, such as <tt>/opt/vmware/hyperic/server-5.0.0-EE</tt>.</p>

<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Upgrade from earlier RPM not supported</b><br />Upgrade of a pre-5.0.0 Hyperic Server installed via RPM to the 5.0.0 PRM is not supported. An attempt to install the 5.0.0 RPM on a machine with a previous Hyperic Server installation will result in an error message that manual upgrade is required.</td></tr></table></div>

<h1><a name="InstallHypericServerRPM-ConfigureServerPropertiesFile"></a>Configure Server Properties File</h1>

<p><a name="InstallHypericServerRPM-ConfigInFile"></a><br/>
This section has instructions for configuring Hyperic Server in a properties file prior to installation. If you do not create a properties file prior to installing the server, the installer will configure the Hyperic Server in accordance with a default properties file. You can reconfigure the server after installation, following the instructions in <a href="#InstallHypericServerRPM-AfterInstall">Configure Hyperic Server in Properties File after Installation</a>.</p>

<p>To define Hyperic Server installation options in a properties file:</p>

<ol>
	<li>Running as <tt>root</tt>, or using <tt>sudo</tt>, create a directory for the properties file:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">mkdir -p /opt/vmware/hyperic</pre>
		</div>
</div></div></li>
	<li>Specify the server installation settings in a file named <tt>vfabric_hyperic_server.properties</tt>.
<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>You must name the file exactly as described and put it in the specified location for the RPM installation to work correctly.</td></tr></table></div>
	<ul>
		<li>See <a href="#InstallHypericServerRPM-ServerPropertiesFileforRPMInstallation">Server Properties File for RPM Installation</a> for a listing of a sample <tt>vfabric_hyperic_server.properties</tt> file. Note that the example properties file configures Hyperic Server to use the built-in local vFabric Postgres database. You can edit the properties file to configure Hyperic Server to use an external PostgreSQL or vFabric Postgres database.</li>
	</ul>
	</li>
	<li>Copy <tt>vfabric_hyperic_server.properties</tt> to the <tt>/opt/vmware/hyperic/</tt> directory.</li>
	<li>Install Hyperic Server following the instructions in the next section.</li>
</ol>


<h1><a name="InstallHypericServerRPM-InstallHypericServer"></a>Install Hyperic Server</h1>
<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Start local SMTP server on Hyperic Server host</b><br />The RPM installer requires that your SMTP server is listening on port 25 on the Hyperic Server host.</td></tr></table></div>

<p>To install Hyperic Server:</p>
<ol>
	<li>On the platform where you wish to install the Hyperic Server:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">yum install vfabric-hyperic-server</pre>
		</div>
</div></div></li>
	<li><tt>yum</tt> resolves dependencies and displays the packages it plans to install.
<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>If this is the first time that you have installed a vFabric component on the VM, <tt>yum</tt> also installs the <tt>vfabric-eula</tt> RPM and prompts you to accept the VMware license agreement.</td></tr></table></div></li>
	<li>Enter <tt>y</tt> at the prompt to start the installation installation.</li>
	<li>What happens next depends on whether you specified the server configuration in the <tt>/opt/vmware/hyperic/vfabric_hyperic_server.properties</tt> file.
	<ul>
		<li>If you <em>did</em> create the properties file, the setup dialog and responses from the properties file are displayed, and an "Installation Complete" message appear. After seeing this message, proceed to the <a href="Hyperic Installation and Startup Process.html#HypericInstallationandStartupProcess-StartServer">Start the Hyperic Server</a> step of <a href="Hyperic Installation and Startup Process.html" title="Hyperic Installation and Startup Process">Hyperic Installation and Startup Process</a>.</li>
		<li>If you <em>did not</em> specify the server configuration in the properties file, the following message is displayed:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">/opt/vmware/hyperic/vfabric_hyperic_server.properties, not found. HQ will be installed, but not configured.

Please use /opt/hyperic/hyperic-hqee-installer/setup.sh to interactively
configure HQ.</pre>
		</div>
</div></div></li>
	</ul>
	</li>
</ol>


<p><a name="InstallHypericServerRPM-AfterInstall"></a></p>

<h2><a name="InstallHypericServerRPM-ConfigureHypericServerinPropertiesFileafterInstallation"></a>Configure Hyperic Server in Properties File after Installation</h2>

<ol>
	<li>Specify the server installation settings in a file named <tt>vfabric_hyperic_server.properties</tt>.
	<ul>
		<li>A sample of <tt>vfabric_hyperic_server.properties</tt> is attached to this page. The sample properties file configures Hyperic Server to use the built-in local Postgresql database. You can edit the properties file to configure Hyperic Server to use an external &#8212; either local or remote &#8212; Postgresql, MySQL, or Oracle database.
<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Do not change installation directory property</b><br />The value of <tt>HQ_SERVER_INSTALL_PATH</tt> must be <tt>/opt/hyperic</tt>. Do not change the value.</td></tr></table></div></li>
		<li>Copy <tt>vfabric_hyperic_server.properties</tt> to the <tt>/etc/vmware/vfabric/hyperic/</tt> directory.</li>
	</ul>
	</li>
	<li>Run the <tt>setup_from_properties_file.sh</tt> script in <tt>/opt/hyperic/hyperic-hqee-installer</tt>:
	<ul>
		<li><b>Note:</b> You must run <tt>setup_from_properties_file.sh</tt> as root, or as the "hyperic" user.</li>
	</ul>
	</li>
</ol>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">$ sh setup_from_properties_file.sh</pre>
		</div>
</div></div>
<ol>
	<li>After setup is complete, you can start the Hyperic Server. For instructions, see <a href="Start and Stop Hyperic Server.html" title="Start and Stop Hyperic Server">Start and Stop Hyperic Server</a>.</li>
</ol>


<h1><a name="InstallHypericServerRPM-ConfigureLicense"></a>Configure License</h1>

<p>Perform the steps in <a href="Install or Configure Hyperic License.html" title="Install or Configure Hyperic License">Install or Configure Hyperic License</a> before starting the Hyperic Server.</p>

<h1><a name="InstallHypericServerRPM-StarttheHypericServer"></a>Start the Hyperic Server</h1>

<p><tt>yum</tt> installs Hyperic Server to start automatically each time your RHEL VM is booted. The init script is <tt>/etc/init.d/hyperic-hq-server</tt>.</p>

<p>Follow these steps to start the Hyperic server manually:</p>

<ol>
	<li>Log in to the RHEL VM as <tt>root</tt>.</li>
	<li>Open a terminal window and run the init script:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">/etc/init.d/hyperic-hq-server start</pre>
		</div>
</div></div>
<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>The first time Hyperic Server starts it may take a few minutes to initialize; subsequent startups will be faster.</td></tr></table></div></li>
	<li>After Hyperic Server starts, invoke the Hyperic user interface in your browser:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">http://host:7080</pre>
		</div>
</div></div>
	<ul>
		<li>Where <tt>host</tt> is the hostname of the RHEL VM on which you just installed Hyperic Server. #&#42; If your browser is on the same computer on which you installed Hyperic Server, you can use <tt>localhost</tt> rather than the name of the computer.</li>
	</ul>
	</li>
	<li>Log in using the default administration username/password of hqadmin/hqadmin; be sure to change the password after you log into the Hyperic UI.</li>
</ol>


<h1><a name="InstallHypericServerRPM-AfterInstallingHypericServer"></a>After Installing Hyperic Server</h1>

<ul>
	<li>For information about installing the Hyperic Agent, see <a href="Install Hyperic Agent RPM.html" title="Install Hyperic Agent RPM">Install Hyperic Agent RPM</a>.</li>
	<li>For information and required and optional Hyperic Server Configuration see <a href="Hyperic Installation and Startup Process.html" title="Hyperic Installation and Startup Process">Hyperic Installation and Startup Process</a>.</li>
</ul>


<h1><a name="InstallHypericServerRPM-ServerPropertiesFileforRPMInstallation"></a>Server Properties File for RPM Installation</h1>

<p>This section contains a listing of <tt>vfabric_hyperic_server.properties</tt>.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false"># Properties file for vFabric Hyperic Server Configuration
#
# This file must be place in /etc/vmware/vfabric/hyperic/ with a name of
# vfabric_hyperic_server.properties to be used by the vfabric-hyperic-server
# rpm for vFabric Hyperic Server configuration.
#
#
# To configure the build-in local Postgresql database uncomment the below
# sections. See below for other database types.
#
################################################################################
# Configuration of local built-in Postgresql database

# Use the local built-in Postgresql database instead of other database types
BUILT_IN_POSTGRESQL=yes

# Do you accept the terms of the agreement?
HQ_ACCEPT_EULA=y

# HQ server installation path
HQ_SERVER_INSTALL_PATH=/opt/vmware/hyperic

# email address that HQ will use as the sender for email messages
HQ_SENDER_EMAIL_ADDRESS=hqadmin@eng.vmware.com

# username be for the initial admin user
HQ_ADMIN_USER=hqadmin

# password be for the initial admin user
HQ_ADMIN_PASSWORD=hqadmin

# email address be for the initial admin user
HQ_ADMIN_EMAIL_ADDRESS=hqadmin@eng.vmware.com


# End of configuration for local built-in Postgresql database
################################################################################



# To configure HQ with a local or remote database other than the built-in
# local instance of Postgresql comment out the above section and uncomment
# the properties in the section below. Supported databases include local or
# remote versions of vPostgresql or Postgresql.
#
################################################################################
# For configuration with local or remote vPostgresql or Postgresql databases

### Do you accept the terms of the agreement?
#HQ_ACCEPT_EULA=y

### HQ server installation path
#HQ_SERVER_INSTALL_PATH=/opt/vmware/hyperic

### email address that HQ will use as the sender for email messages
#HQ_SENDER_EMAIL_ADDRESS=hqadmin@eng.vmware.com

### database type of [PostgreSQL]
#HQ_DB_TYPE=PostgreSQL

### database connection string
#HQ_DB_URL=jdbc:postgresql://localhost:5432/HQ?protocolVersion=2

### username to use to connect to the database
#HQ_DB_USERNAME=hqadmin

### password to use to connect to the database
#HQ_DB_PASSWORD=hqadmin

### username be for the initial admin user
#HQ_ADMIN_USER=hqadmin

### password be for the initial admin user
#HQ_ADMIN_PASSWORD=hqadmin

### email address be for the initial admin user
#HQ_ADMIN_EMAIL_ADDRESS=hqadmin@eng.vmware.com

### HQ server installation profile [small|medium|large]
#HQ_SERVER_INSTALLATION_PROFILE=medium

# End of configuration
################################################################################</pre>
		</div>
</div></div>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">
                                <h2>Attachments:</h2>
                            </a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/79659664/79921941.properties">vfabric_hyperic_server.properties</a> (application/octet-stream)
                                <br/>
                                                    </div>
				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Oct 29, 2012 13:00</font></td>
		    </tr>
	    </table>
    </body>
</html>
