<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Hyperic 4.6 Documentation : HQApi alert command</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Hyperic 4.6 Documentation : HQApi alert command
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jun 07, 2011 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <p><font color="gray"><em>Topics marked with</em></font> <font color="red">*</font> <font color="gray"><em>relate to features available only in vFabric Hyperic.</em></font></p>


<style type='text/css'>/*<![CDATA[*/
div.rbtoc1307466606075 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1307466606075 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1307466606075 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1307466606075'>
<ul>
    <li><a href='#HQApialertcommand-Functionality'>Functionality</a></li>
    <li><a href='#HQApialertcommand-alertCommandOptions'>alert Command Options</a></li>
<ul>
    <li><a href='#HQApialertcommand-alertlist'>alert list</a></li>
<ul>
    <li><a href='#HQApialertcommand-StructureofanAlertsResponseElement'>Structure of an AlertsResponse Element</a></li>
    <li><a href='#HQApialertcommand-AttributesinanAlertsResponse'>Attributes in an AlertsResponse</a></li>
    <li><a href='#HQApialertcommand-ListExamples'>List Examples</a></li>
<ul>
    <li><a href='#HQApialertcommand-ListLastnAlerts'>List Last n Alerts</a></li>
    <li><a href='#HQApialertcommand-ListLastnAlertsinEscalation'>List Last n Alerts in Escalation</a></li>
    <li><a href='#HQApialertcommand-ListLastnUnfixedAlerts'>List Last n Unfixed Alerts</a></li>
    <li><a href='#HQApialertcommand-ListAlertsthatFiredDuringanInterval'>List Alerts that Fired During an Interval</a></li>
    <li><a href='#HQApialertcommand-ListUnfixedAlertswithSeverityLevel'>List Unfixed Alerts with Severity Level</a></li>
</ul>
</ul>
    <li><a href='#HQApialertcommand-alertack'>alert ack</a></li>
    <li><a href='#HQApialertcommand-alertfix'>alert fix</a></li>
    <li><a href='#HQApialertcommand-alertdelete'>alert delete</a></li>
</ul>
</ul></div>


<p><font color="gray"><em>Feedback is welcome. Click <b>Add Comment</b> at the bottom of the page.</em></font></p>


<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Related Topics</b><br />This page provides information for running an HQ API from the command line. Related topics include: 
<ul>
	<li><a href="http://support.hyperic.com/display/DOCS46/Web+Services+API" title="Web Services API">Web Services API</a> - brief introduction to the API.</li>
	<li><a href="HQ API Command-Line Tools.html" title="HQ API Command-Line Tools">HQ API Command&#45;Line Tools</a> - how to get started with the command line tools.</li>
	<li><a href="HQApi Java API.html" title="HQApi Java API">HQApi Java API</a> - about accessing the APIs programmatically.</li>
</ul>
</td></tr></table></div> 

<div class="scroll-pagebreak"></div>


<h1><a name="HQApialertcommand-Functionality"></a>Functionality</h1>

<p>The <tt>alert</tt> command has options you can use to list information for fired alerts, to fix an alert, to acknowledge an alert in escalation, and as of HQApi 3.2, to delete an alert.</p>

<h1><a name="HQApialertcommand-alertCommandOptions"></a>alert Command Options</h1>

<h2><a name="HQApialertcommand-alertlist"></a>alert list</h2>

<p>The <b>alert list</b> command returns an <tt>&lt;AlertsResponse&gt;</tt> element, which contains alert data for fired alerts.<br/>
Command qualifiers:</p>
<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Qualifier* </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Required </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-begin</tt> </td>
<td class='confluenceTd'> Use the <tt>&#45;-begin</tt> and <tt>&#45;-end</tt> qualifiers to specify the beginning and end of a time interval for which you wish to list fired alerts. Specify in epoch-millis. </td>
<td class='confluenceTd'> no </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-count</tt> </td>
<td class='confluenceTd'> The number of alerts to return. </td>
<td class='confluenceTd'> yes </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-end</tt> </td>
<td class='confluenceTd'> Use the <tt>&#45;-begin</tt> and <tt>&#45;-end</tt> qualifiers to specify the beginning and end of a time interval for which you wish to list fired alerts. Specify in epoch-millis. </td>
<td class='confluenceTd'> no </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-inEsc</tt> </td>
<td class='confluenceTd'> Use to limit the alerts returned to alerts in escalation. </td>
<td class='confluenceTd'> no </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-notFixed</tt> </td>
<td class='confluenceTd'> Use to limit the alerts returned to alerts that have not been marked "fixed". </td>
<td class='confluenceTd'> no </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-severity</tt> </td>
<td class='confluenceTd'> Use to restrict the alerts returned to those with a specified priority (as defined in the alert definition) or higher. Allowable values are: <br class="atl-forced-newline" />
<ul>
	<li>1 &#8212; returns alerts with priority level "Low" or higher, in effect, returns alerts regardless of priority. This is the default value. <br class="atl-forced-newline" />  <br class="atl-forced-newline" /></li>
	<li>3 &#8212; returns only alerts whose priority is "High"</li>
</ul>
</td>
<td class='confluenceTd'> no </td>
</tr>
</tbody></table>
</div>



<h3><a name="HQApialertcommand-StructureofanAlertsResponseElement"></a>Structure of an AlertsResponse Element</h3>

<p>The <tt>AlertsResponse</tt> object returned by the <b>alert list</b> command has this element structure:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>&lt;AlertsResponse&gt;
&lt;Alert&gt;
&lt;AlertActionLog&gt;

</pre>
</div></div>
<p>where there is</p>
<ul>
	<li>One <tt>&lt;Alert&gt;</tt> element for each fired alert.</li>
	<li>One <tt>&lt;AlertActionLog&gt;</tt> element for each action.</li>
</ul>


<h3><a name="HQApialertcommand-AttributesinanAlertsResponse"></a>Attributes in an AlertsResponse</h3>

<p>This table defines the attributes in a <tt>AlertsResponse</tt>.</p>

<p>Note that there are eight different types of <tt>AlertCondition</tt> elements, each with a different "type" value.</p>
<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Element </th>
<th class='confluenceTh'> Attribute </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Values </th>
</tr>
<tr>
<td class='confluenceTd'> Alert </td>
<td class='confluenceTd'> id </td>
<td class='confluenceTd'> HQ internal ID for the alert. </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> name </td>
<td class='confluenceTd'> Name of the alert definition. </td>
<td class='confluenceTd'> <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> alertDefinitionId </td>
<td class='confluenceTd'> HQ internal ID for the alert definition. </td>
<td class='confluenceTd'> <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> resourceID </td>
<td class='confluenceTd'> HQ internal ID for the resource to which the alert definition was assigned. </td>
<td class='confluenceTd'> <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> ctime </td>
<td class='confluenceTd'> When the alert fired, in milliseconds since epoch. </td>
<td class='confluenceTd'> <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> fixed </td>
<td class='confluenceTd'> Whether or not the alert has been "fixed". </td>
<td class='confluenceTd'> true or false </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> reason </td>
<td class='confluenceTd'> Alert condition that fired the alert and the triggering value. </td>
<td class='confluenceTd'> <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> AlertActionLog </td>
<td class='confluenceTd'> timestamp </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> user </td>
<td class='confluenceTd'> HQ user account under which the alert status event was performed. </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> detail </td>
<td class='confluenceTd'> Short description of what was logged for the alert. </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>
</div>



<h3><a name="HQApialertcommand-ListExamples"></a>List Examples</h3>

<h4><a name="HQApialertcommand-ListLastnAlerts"></a>List Last n Alerts</h4>

<p>This command requests the last 5 alerts that have fired regardless of acknowledgement of fix status.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">hqapi.sh alert list --count=5</pre>
		</div>
</div></div>
<p>The following results are returned:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">&lt;AlertsResponse&gt;
&lt;Alert id="386023" name="RTA-up alert" alertDefinitionId="13337" resourceId="19023" ctime="1278609900000" fixed="true" reason="If Availability &amp;gt; 0.0% (actual value = 100.0%)"/&gt;
&lt;Alert id="386022" name="RTA-Down Alert" alertDefinitionId="13336" resourceId="19023" ctime="1278609660000" fixed="true" reason="If Availability &amp;lt; 100.0% (actual value = 0.0%)"&gt;
&lt;AlertActionLog timestamp="1278609905762" user="admin" detail="Recovery Alert"/&gt;
&lt;/Alert&gt;
&lt;Alert id="385922" name="RTA-up alert" alertDefinitionId="12020" resourceId="16595" ctime="1278461340000" fixed="true" reason="If Availability &amp;gt; 0.0% (actual value = 100.0%)"/&gt;
&lt;Alert id="385921" name="RTA-Down Alert" alertDefinitionId="12019" resourceId="16595" ctime="1278461160000" fixed="true" reason="If Availability &amp;lt; 100.0% (actual value = 0.0%)"&gt;
&lt;AlertActionLog timestamp="1278461426260" user="admin" detail="Recovery Alert"/&gt;
&lt;/Alert&gt;
&lt;Alert id="385824" name="RTA-up alert" alertDefinitionId="12020" resourceId="16595" ctime="1278334680000" fixed="true" reason="If Availability &amp;gt; 0.0% (actual value = 100.0%)"/&gt;
&lt;/Alert&gt;</pre>
		</div>
</div></div>

<h4><a name="HQApialertcommand-ListLastnAlertsinEscalation"></a>List Last n Alerts in Escalation</h4>

<p>This command requests the last 10 fired alerts that are in escalation.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">hqapi.sh alert list --inEsc --count=10</pre>
		</div>
</div></div>

<h4><a name="HQApialertcommand-ListLastnUnfixedAlerts"></a>List Last n Unfixed Alerts</h4>

<p>This command requests the last 10 alerts that are not fixed.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">hqapi.sh alert list --notFixed --count=10</pre>
		</div>
</div></div>

<h4><a name="HQApialertcommand-ListAlertsthatFiredDuringanInterval"></a>List Alerts that Fired During an Interval</h4>

<p>This command requests the last 10 alerts that fired between Tue, 03 Aug 2010 09:00:00 GMT and Tue, 03 Aug 2010 17:00:00 GMT.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">hqapi.sh alert list --count=10 --start=1280826000 end=1283207083</pre>
		</div>
</div></div>

<h4><a name="HQApialertcommand-ListUnfixedAlertswithSeverityLevel"></a>List Unfixed Alerts with Severity Level</h4>

<p>This command requests the last 20 unfixed alerts with priority level "high".</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">sh bin/hqapi.sh alert list --count=10 --notFixed --severity=3</pre>
		</div>
</div></div>

<h2><a name="HQApialertcommand-alertack"></a>alert ack</h2>

<p>The <b>alert ack</b> command acknowledge an alert in escalation.</p>

<p>Command qualifiers:</p>
<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> <b>Qualifier</b> </td>
<td class='confluenceTd'> <b>Description</b> </td>
<td class='confluenceTd'> <b>Required</b> </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-id</tt> </td>
<td class='confluenceTd'> The internal HQ ID for the alert. </td>
<td class='confluenceTd'> yes </td>
</tr>
</tbody></table>
</div>


<p>This command acknowledges the alert whose internal ID is 10254.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">sh bin/hqapi.sh alert ack --id=10254</pre>
		</div>
</div></div>
<p>If the command was successful, a response like the following is returned:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">Successfully acknowledged alert id 10254</pre>
		</div>
</div></div>

<h2><a name="HQApialertcommand-alertfix"></a>alert fix</h2>

<p>The <b>alert fix</b> command marks an alert "fixed".</p>

<p>Command qualifiers:</p>
<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> <b>Qualifier</b> </td>
<td class='confluenceTd'> <b>Description</b> </td>
<td class='confluenceTd'> <b>Required</b> </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-id</tt> </td>
<td class='confluenceTd'> The internal HQ ID for the alert. </td>
<td class='confluenceTd'> yes </td>
</tr>
</tbody></table>
</div>


<p>This command fixes the alert whose internal ID is 10254.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">sh bin/hqapi.sh alert fix --id=10254</pre>
		</div>
</div></div>
<p>If the command was successful, a response like the following is returned:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">Successfully fixed alert id 10254</pre>
		</div>
</div></div>

<h2><a name="HQApialertcommand-alertdelete"></a>alert delete</h2>

<p>The <b>alert delete</b> command deletes a fired alert from history.</p>

<p>Command qualifiers:</p>
<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> <b>Qualifier</b> </td>
<td class='confluenceTd'> <b>Description</b> </td>
<td class='confluenceTd'> <b>Required</b> </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-id</tt> </td>
<td class='confluenceTd'> The internal HQ ID for the alert. </td>
<td class='confluenceTd'> yes </td>
</tr>
</tbody></table>
</div>


<p>This command deletes the alert whose internal ID is 10254.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">sh bin/hqapi.sh alert delete --id=10254</pre>
		</div>
</div></div>
<p>If the command was successful, a response like the following is returned:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">Successfully deleted alert id 10254</pre>
		</div>
</div></div>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 14, 2011 15:09</font></td>
		    </tr>
	    </table>
    </body>
</html>
