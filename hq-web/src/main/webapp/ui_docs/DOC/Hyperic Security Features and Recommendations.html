<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 4.6.5 : Hyperic Security Features and Recommendations</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 4.6.5.html" title="vFabric Hyperic 4.6.5 Documentation Home">vFabric Hyperic 4.6.5 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 4.6.5 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-4.6.5.html">Hyperic 4.6.5 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 4.6.5 : Hyperic Security Features and Recommendations
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 24, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <style type='text/css'>/*<![CDATA[*/
div.rbtoc1327443132219 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1327443132219 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1327443132219 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1327443132219'>
<ul>
    <li><a href='#HypericSecurityFeaturesandRecommendations-SSLAgenttoServerCommunications'>SSL Agent to Server Communications</a></li>
    <li><a href='#HypericSecurityFeaturesandRecommendations-SSLBetweena4.6Serverand4.6Agents'>SSL Between a 4.6 Server and 4.6 Agents</a></li>
    <li><a href='#HypericSecurityFeaturesandRecommendations-SSLBetweena4.6Serverand4.5Agents'>SSL Between a 4.6 Server and 4.5 Agents</a></li>
    <li><a href='#HypericSecurityFeaturesandRecommendations-SSLandHypericProductPlugins'>SSL and Hyperic Product Plugins</a></li>
    <li><a href='#HypericSecurityFeaturesandRecommendations-AgentInitiatedCommunication'>Agent-Initiated Communication</a></li>
    <li><a href='#HypericSecurityFeaturesandRecommendations-ProtectionofSensitiveData'>Protection of Sensitive Data</a></li>
    <li><a href='#HypericSecurityFeaturesandRecommendations-UseLDAPAuthentication'>Use LDAP Authentication</a></li>
</ul></div>

<h1><a name="HypericSecurityFeaturesandRecommendations-SSLAgenttoServerCommunications"></a>SSL Agent to Server Communications</h1>
<p>Hyperic 4.6 supports the use of SSL communication for both server-to-agent and agent-to-server communications. Server-to-agent communication is <em>always</em> SSL; you cannot configure Hyperic to use plain HTTP for server-to-agent communication. The use of SSL for agent-to-server communication is configurable. </p>

<p>You can configure the Hyperic Agent to use SSL when contacting the Hyperic Server when you configure agent-server communications, either interactively at first agent startup, or in <tt>AgentHome/conf/agent.properties</tt> using the <tt>agent.setup.camSecure</tt> property.</p>


<h1><a name="HypericSecurityFeaturesandRecommendations-SSLBetweena4.6Serverand4.6Agents"></a>SSL Between a 4.6 Server and 4.6 Agents</h1>
<p><a name="HypericSecurityFeaturesandRecommendations-certs"></a></p>

<p>When the Hyperic 4.6 server and Hyperic 4.6 Agents communicate over SSL, each component validates the other's SSL certificate.  </p>

<p>When you run the Hyperic 4.6 installer in <tt>-full</tt> mode, it offers you the option of configuring the location and password of an existing keystore on the Hyperic Server host.  </p>

<p>If you do not configure the server to use an existing keystore, and supply its location and password during server installation, the installer will create a keystore for the server with a self-signed certificate. The keystore, named <tt>hyperic.keystore</tt>, will be in <tt>ServerHome/conf</tt>, and have the password "hyperic". The server will present the self-signed certificate when communicating with agents.</p>

<p>The agent will not trust a certificate if these conditions are true:</p>
<ul>
	<li>The certificate does not exist in the agent truststore</li>
	<li>The certificate is self-signed or signed by a CA that the agent cannot verify.</li>
</ul>


<p>If the agent does not trust the Hyperic Server's certificate, it issues a warning (to the command shell or the startup log) that the authenticity of Hyperic Server host cannot be established, and prompts for confirmation that you wish to connect. </p>

<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>SSL Certificate Best Practices for New Hyperic Installations</b><br /><ul>
	<li>Create an SSL keystore on the Hyperic Server host and on each Hyperic Agent.</li>
	<li>Before starting an agent for the first time, configure the location and password of its keystore in its <tt>agent.properties</tt> file, as described in <a href="Configure SSL Options.html" title="Configure SSL Options">Configure SSL Options</a></li>
	<li>If you do not configure your own SSL keystores for Hyperic Agents and the Hyperic Server, the components will generate keystores with self-signed certificates. Both are named "hq". The use of unverified certificates is not recommended. If you do use Hyperic-generated keystores, update the password for each Hyperic-generated keystore; edit <tt><a href="agent.keystore.password.html" title="agent.keystore.password">agent.keystore.password</a></tt> in the <tt>agent.properties</tt> file, and restart the agent.</li>
</ul>
</td></tr></table></div>

<h1><a name="HypericSecurityFeaturesandRecommendations-SSLBetweena4.6Serverand4.5Agents"></a>SSL Between a 4.6 Server and 4.5 Agents</h1>

<p>To ensure backwards compatibility with pre-4.6 Hyperic Agents, the Hyperic Server upgrade procedure does <em>not</em> provide a mechanism for configuring the server to access a user-managed keystore. </p>

<p>When a newly-upgraded Hyperic 4.6 Server starts up, it generates a self-signed SSL certificate.</p>

<p>When a pre-4.6 Hyperic Agent first connects to a newly-upgraded Hyperic 4.6 server, its self-signed certificate is imported into the server's keystore. </p>


<h1><a name="HypericSecurityFeaturesandRecommendations-SSLandHypericProductPlugins"></a>SSL and Hyperic Product Plugins </h1>
<p><a name="HypericSecurityFeaturesandRecommendations-SslPlugins"></a></p>

<p>In Hyperic 4.6, Hyperic plugins that connect to managed products over SSL are updated to support certificate verification. To enable management of such products by a 4.6 agent, it may be necessary to  manually import the target server's certificate into the agent keystore if the server's certificate is not trusted. Affected plugins include:</p>

<ul>
	<li><a href="vSphere.html" title="vSphere">vSphere</a></li>
	<li><a href="RabbitMQ.html" title="RabbitMQ">RabbitMQ</a></li>
</ul>


<p>Import of the managed server's certificate is necessary only if the Hyperic Agent cannot verify the certificate. If the agent's keystore contains a CA cert and the managed server's certificate has been signed by that CA, the agent will be able verify the certificate. Otherwise, you should import the certificate of the signing CA, which is preferable to simply importing the managed server's certificate. If you are not sure of all of the CAs for signed certificates, you might consider importing the certificates in your JRE cacert file, which contains certificates for a variety of common CAs.</p>


<h1><a name="HypericSecurityFeaturesandRecommendations-AgentInitiatedCommunication"></a>Agent-Initiated Communication</h1>

<p>You can configure Hyperic such that Hyperic Agents initiate all communications with the Hyperic Server. This feature &#8212; referred to as <em>unidirectional communication</em> is useful if your network topology requires managed platforms to initiate all communication with processes outside a firewall. </p>

<p>You can configure unidirectional communication interactively at first agent startup, or with the <tt>agent.setup.unidirectional</tt> in the agent's <tt>agent.properties</tt> file.  See the requirements described at <tt><a href="agent.setup.unidirectional.html" title="agent.setup.unidirectional">agent.setup.unidirectional</a></tt>.</p>

<h1><a name="HypericSecurityFeaturesandRecommendations-ProtectionofSensitiveData"></a>Protection of Sensitive Data</h1>

<p>In this version of Hyperic, the Hyperic installer writes some sensitive data to installation log files. </p>

<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Sensitive Data Best Practices</b><br />After successfully installing Hyperic Server, delete <tt>InstallerHome/logs/hq-install.log</tt> and <tt>hq-install.log.verbose</tt>, or the whole the exploded installer.</td></tr></table></div>


<h1><a name="HypericSecurityFeaturesandRecommendations-UseLDAPAuthentication"></a>Use LDAP Authentication</h1>

<p>Hyperic Server encrypts user passwords using a encryption key you supply during installation. Note however, that Hyperic Server does <em>not</em> have a strength-of-password policy, or a lockout policy for failed login attempts. Best practice is to integrate Hyperic with your existing enterprise directory. For information about integrating Hyperic with LDAP, Active Directory, and Kerberos, see <a href="Configure LDAP Properties.html" title="Configure LDAP Properties">Configure LDAP Properties</a> and <a href="Configure Kerberos Properties.html" title="Configure Kerberos Properties">Configure Kerberos Properties</a>.</p>



				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Feb 14, 2012 13:49</font></td>
		    </tr>
	    </table>
    </body>
</html>
