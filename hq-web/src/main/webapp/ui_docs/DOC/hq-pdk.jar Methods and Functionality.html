<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 5.7 : hq-pdk.jar Methods and Functionality</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 5.7.html" title="vFabric Hyperic 5.7 Documentation Home">vFabric Hyperic 5.7 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 5.7 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-5.0.html">Hyperic 5.7 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 5.7 : hq-pdk.jar Methods and Functionality
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 04, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    

<style type='text/css'>/*<![CDATA[*/
div.rbtoc1325699811025 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1325699811025 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1325699811025 li {margin-left: 0px;padding-left: 0px;}

/*]] >*/</style><div class='rbtoc1325699811025'>
<ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-lifecyleInitializeandCheckSyntax'>lifecyle - Initialize and Check Syntax</a></li>
<ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-ExampleResultsoflifecycleMethodonaPluginwithNoErrors'>Example Results of lifecycle Method on a Plugin with No Errors</a></li>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-ExampleResultsoflifecycleMethodonaPluginwithErrors'>Example Results of lifecycle Method on a Plugin with Errors</a></li>
</ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-discoverAutoDiscoverResourcesandConfiguration'>discover - Auto-Discover Resources and Configuration</a></li>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-metricFetchMetrics'>metric - Fetch Metrics</a></li>
<ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-SyntaxformetricMethodUsingResourcePropertiesFile'>Syntax for metric Method Using Resource Properties File</a></li>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-SyntaxformetricMethodSpecifyingConfigurationDataonCommandLine'>Syntax for metric Method Specifying Configuration Data on Command Line</a></li>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-ExampleInvocations'>Example Invocations</a></li>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-Resultsreturnedby%5Cmetricmethoddefaultaction'>Results returned by -metric method default action</a></li>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-Resultsreturnedbymetricmethodtranslateaction'>Results returned by metric method translate action</a></li>
</ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-trackWatchforLogorConfigurationEvents'>track - Watch for Log or Configuration Events</a></li>
<ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-Examples'>Examples</a></li>
</ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-controlPerformaControlActiononaResource'>control - Perform a Control Action on a Resource</a></li>
<ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-Examples'>Examples</a></li>
</ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-livedataFetchLiveSystemInformation'>livedata - Fetch Live System Information</a></li>
<ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-ResultsofcpuCommand'>Results of cpu Command</a></li>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-cpupercCommandResults'>cpuperc Command Results</a></li>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-ifconfigCommandResults'>ifconfig Command Results</a></li>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-whoCommandResults'>who Command Results</a></li>
</ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-generateCreatePluginDocumentation'>generate - Create Plugin Documentation</a></li>
<ul>
    <li><a href='#hq-pdk.jarMethodsandFunctionality-Syntax'>Syntax</a></li>
</ul>
</ul></div>



<h2><a name="hq-pdk.jarMethodsandFunctionality-lifecyleInitializeandCheckSyntax"></a>lifecyle - Initialize and Check Syntax</h2>

<p>The <tt>lifecycle</tt> method loads a plugin and reports errors found.</p>

<p>The syntax for the <tt>lifecycle</tt> method is:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">$ java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -p PluginName -m lifecycle -Dplugins.include=PluginName</pre>
		</div>
</div></div>
<p>where:</p>
<ul>
	<li><tt>-p PluginName</tt> identifies the plugin to run, by the product portion of the plugin name, e.g. "jboss"; the plugin must reside in the agent's <tt>plugin</tt> directory.</li>
</ul>


<ul>
	<li><tt>-Dplugins.include=PluginName</tt> ensures that only the specified plugin is loaded; otherwise all plugins are loaded. (Use of this command option is recommended, although not required.)</li>
</ul>


<h3><a name="hq-pdk.jarMethodsandFunctionality-ExampleResultsoflifecycleMethodonaPluginwithNoErrors"></a>Example Results of lifecycle Method on a Plugin with No Errors</h3>

<p>This command runs the <tt>lifecycle</tt> method for the jboss plugin; no errors are found.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">$ java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -m lifecycle -p jboss -Dplugins.include=jboss</pre>
		</div>
</div></div>

<h3><a name="hq-pdk.jarMethodsandFunctionality-ExampleResultsoflifecycleMethodonaPluginwithErrors"></a>Example Results of lifecycle Method on a Plugin with Errors</h3>

<p>This command runs the <tt>lifecycle</tt> method for the websphere plugin; errors are reported.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">$ java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -m lifecycle -p websphere -Dplugins.include=websphere
WARN [main] [MetricsTag] MsSQL 2000 include not found: mssql-cache
WARN [main] [MetricsTag] WebSphere 6.1 include not found: WebSphere 6.0
WARN [main] [MetricsTag] WebSphere 6.1 Application include not found: WebSphere 6.0 Application
WARN [main] [MetricsTag] WebSphere 6.1 EJB include not found: WebSphere 6.0 EJB
WARN [main] [MetricsTag] WebSphere 6.1 Webapp include not found: WebSphere 6.0 Webapp
WARN [main] [MetricsTag] WebSphere 6.1 Connection Pool include not found: WebSphere 6.0 Connection Pool
WARN [main] [MetricsTag] WebSphere 6.1 Thread Pool include not found: WebSphere 6.0 Thread Pool
WARN [main] [MetricsTag] WebSphere Admin 6.1 include not found: WebSphere Admin 6.0</pre>
		</div>
</div></div>

<h2><a name="hq-pdk.jarMethodsandFunctionality-discoverAutoDiscoverResourcesandConfiguration"></a>discover - Auto-Discover Resources and Configuration</h2>

<p>The <tt>discover</tt> method can be run for one or all plugins. It returns key attributes for each resource discovered, including the values of the resource's configuration options, to the terminal window or to a properties files. If you save discovery results to a file, you can use the file to supply required resource configuration data when you run another method that requires the resource's configuration data.</p>

<p>The syntax for the <tt>discover</tt> option is:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">{{java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -m discover -p PluginName -a properties</pre>
		</div>
</div></div>

<p>where:</p>

<ul>
	<li><tt>-p PluginName</tt> specifies the plugin to run; if not specified, discovery is performed for all plugins in the agent's <tt>plugin</tt> directory.</li>
</ul>


<ul>
	<li><tt>-a properties</tt> writes discovery results to files; otherwise results are returned only to the terminal window. See <a href="Generating and Using Resource Properties Files.html" title="Generating and Using Resource Properties Files">Generating and Using Resource Properties Files</a> for more information.</li>
</ul>


<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> To... </th>
<th class='confluenceTh'> Use... <br class="atl-forced-newline" /> </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> run discovery for all plugins <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> <tt>&#45;m discover</tt> </td>
<td class='confluenceTd'> Results are returned to the terminal window. <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> run discovery for one plugin, in this case Jboss <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> <tt>&#45;m discover &#45;p jboss</tt> </td>
<td class='confluenceTd'> Results are returned to the terminal window. </td>
</tr>
<tr>
<td class='confluenceTd'> run discovery for JBoss and save results to files <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> <tt>&#45;m discover &#45;p jboss &#45;a properties</tt> </td>
<td class='confluenceTd'> Results are written to files, as well as to the terminal window. <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> run discovery for all plugins and save results to files <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> <tt>&#45;m discover &#45;a properties</tt> </td>
<td class='confluenceTd'> Results are written to files, as well as to the terminal window. <br class="atl-forced-newline" /> </td>
</tr>
</tbody></table>
</div>


<h2><a name="hq-pdk.jarMethodsandFunctionality-metricFetchMetrics"></a>metric - Fetch Metrics</h2>

<p>The <tt>metric</tt> method can be used to:</p>
<ul>
	<li>Fetch the metric template and metric value for each metric for a resource managed by the plugin, or just for those metrics that:
	<ul>
		<li>are collected by default,</li>
		<li>are of a specified metric category, or</li>
		<li>are indicator metrics</li>
	</ul>
	</li>
	<li>Return the metric template only (and not the metric value) for the metrics.</li>
</ul>


<ul>
	<li>Fetch metrics repeatedly - as many times as you specify - and return the time it took to perform the fetches for each metric.</li>
</ul>


<h3><a name="hq-pdk.jarMethodsandFunctionality-SyntaxformetricMethodUsingResourcePropertiesFile"></a>Syntax for metric Method Using Resource Properties File</h3>

<p>The syntax for running the <tt>metric</tt> method using a properties file to supply resource configuration data is:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -m metric plugin-properties/ResourceTypeDirectory/ResourceName.properties -a translate -Dmetric-collect=default -Dmetric-indicator=true -Dmetric-cat=CATEGORY -Dmetric-iter=ITERATIONS</pre>
		</div>
</div></div>
<p>where:</p>
<ul>
	<li><tt>plugin-properties/ResourceTypeDirectory/ResourceName.properties</tt> is the path to the file generated when the resource was discovered using the <tt>properties</tt> action of the <tt>discover</tt> method. The properties file supplies the values for:
	<ul>
		<li><tt>-p PluginName</tt> specifies the product portion of the plugin name.</li>
		<li><tt>-t ResourceType</tt> is the resource type name.</li>
		<li>the value of configuration options for the resource</li>
	</ul>
	</li>
</ul>


<ul>
	<li><tt>-a translate</tt> causes metric templates, but not metric values, to be returned.&nbsp; If <tt>&#45;a translate</tt> is not specified both metric templates and metric values are returned.</li>
</ul>


<ul>
	<li>optionally, one (and only one) of these options is specified to limit the metrics returned (if none of these options is specified, all metrics are returned):
	<ul>
		<li><tt>&#45;Dmetric-collect=default</tt> limits results to metrics whose "defaultOn" attribute is set to "true".</li>
		<li><tt>&#45;Dmetric-indicator=true</tt> limits results to metrics whose "indicator" attribute is set to "true".</li>
		<li><tt>&#45;Dmetric-cat=CATEGORY</tt> limits results to metrics of the specified category - one of AVAILABILITY, UTILIZATION, THROUGHPUT, or PERFORMANCE.</li>
	</ul>
	</li>
</ul>


<ul>
	<li><tt>-Dmetric-iter=ITERATIONS</tt> causes the time (in millis) to collect a metric repeatedly to be reported, rather than the metric value.</li>
</ul>


<h3><a name="hq-pdk.jarMethodsandFunctionality-SyntaxformetricMethodSpecifyingConfigurationDataonCommandLine"></a>Syntax for metric Method Specifying Configuration Data on Command Line</h3>

<p>The syntax for running the <tt>metric</tt> method suppling resource configuration data on the command line is:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -m metric -p PluginName -t ResourceType -a translate -Dmetric-collect=default -Dmetric-indicator=true -Dmetric-cat=CATEGORY -Dmetric-iter=ITERATIONS -DOption=Value</pre>
		</div>
</div></div>

<p>where:</p>
<ul>
	<li><tt>-p</tt> PluginName}} specifies the product portion of the plugin name.</li>
</ul>


<ul>
	<li><tt>-t} ResourceType</tt> is the resource type name.</li>
</ul>


<ul>
	<li><tt>-a translate</tt> causes metric templates, but not metric values, to be returned.&nbsp; If <tt>&#45;a translate</tt> is not specified both metric templates and metric values are returned.</li>
</ul>


<ul>
	<li>optionally, one (and only one) of these options is specified to limit the metrics returned (if none of these options is specified, all metrics are returned):
	<ul>
		<li><tt>&#45;Dmetric-collect=default</tt> limits results to metrics whose "defaultOn" attribute is set to "true".</li>
		<li><tt>&#45;Dmetric-indicator=true</tt> limits results to metrics whose "indicator" attribute is set to "true".</li>
		<li><tt>&#45;Dmetric-cat=CATEGORY</tt> limits results to metrics of the specified category - one of AVAILABILITY, UTILIZATION, THROUGHPUT, or PERFORMANCE.</li>
	</ul>
	</li>
</ul>


<ul>
	<li><tt>-Dmetric-iter=ITERATIONS</tt> causes a the time (in millis) to collect a metric repeatedly to be reported, rather than the metric value. &nbsp;</li>
</ul>


<ul>
	<li>a <tt>-DOption=Value</tt> specifies the value of a resource configuration option; the command line must include a <tt>-DOption=Value</tt> for <em>each</em> resource configuration option.</li>
</ul>


<h3><a name="hq-pdk.jarMethodsandFunctionality-ExampleInvocations"></a>Example Invocations</h3>

<p>In these examples, only the method invocation and command options are shown.&nbsp; The <tt>java -jar AgentHome/bundles/AgentBundle/pdk/lib/hq-pdk-VERSION.jar</tt> portion of the command is not shown.</p>

<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> To... </th>
<th class='confluenceTh'> Use... </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> fetch metrics for a jboss server </td>
<td class='confluenceTd'> -m metric -p jboss -t "JBoss 4.2" -m metric -Djava.naming.provider.url=jnp://0.0.0.0:2099 -Dserver.log_track.files=../../../logs/server.log -Dprogram=/Applications/HQEE42GA/server-4.2.0-EE/hq-engine/bin/run.sh </td>
<td class='confluenceTd'> In this example, resource configuration data is supplied on the command line. <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> fetch metrics for the jboss server supplying the configuration data using a properties file <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> -m metric plugin-properties/jboss-4.2/melba_HQ_jBoss_4.x.properties</td>
<td class='confluenceTd'> In this example, resource configuration data is supplied by a properties file <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> limit the results to indicator metrics </td>
<td class='confluenceTd'> add the following to the command line: <br class="atl-forced-newline" />
<br class="atl-forced-newline" />  <tt>&#45;Dmetric-collect=default</tt> <br class="atl-forced-newline" />  <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> If you use this option, do not use either of these: <br class="atl-forced-newline" />
<br class="atl-forced-newline" />  <tt>&#45;Dmetric-cat=CATEGORY</tt> <br class="atl-forced-newline" />  <tt>&#45;Dmetric-indicator=true</tt> </td>
</tr>
<tr>
<td class='confluenceTd'> limit the results to metrics of a specific category </td>
<td class='confluenceTd'> add the following to the command line: <br class="atl-forced-newline" />
<br class="atl-forced-newline" />  <tt>&#45;Dmetric-cat=CATEGORY</tt> <br class="atl-forced-newline" />  <br class="atl-forced-newline" />
where: <br class="atl-forced-newline" />  <br class="atl-forced-newline" />  <tt>CATEGORY</tt> is one of AVAILABILITY, UTILIZATION, THROUGHPUT, or PERFORMANCE <br class="atl-forced-newline" />  <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> If you use this, do not use either of these: <br class="atl-forced-newline" />
<br class="atl-forced-newline" />  <tt>&#45;Dmetric-collect=default</tt> <br class="atl-forced-newline" />  <tt>&#45;Dmetric-indicator=true</tt> <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> limit the results to indicator metrics&nbsp; </td>
<td class='confluenceTd'> add the following to the command line: <br class="atl-forced-newline" />
<br class="atl-forced-newline" />  <tt>&#45;Dmetric-indicator=true</tt> <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> If you use this, do not use either of these: <br class="atl-forced-newline" />
<br class="atl-forced-newline" />  <tt>&#45;Dmetric-collect=default</tt> <br class="atl-forced-newline" />  <tt>&#45;Dmetric-cat=CATEGORY</tt> <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> collect each metric multiple times and report how long it took to do so (in millis) instead reporting the metric value </td>
<td class='confluenceTd'> add the following to the command line: <br class="atl-forced-newline" />  <br class="atl-forced-newline" />  <tt>-Dmetric-iter=ITERATIONS</tt> <br class="atl-forced-newline" />  <br class="atl-forced-newline" />
where <tt>ITERATIONS</tt> is the number of times to run <tt>getValue</tt> for each metric. </td>
<td class='confluenceTd'> May be used in conjunction with one of: <br class="atl-forced-newline" />  <br class="atl-forced-newline" />  <tt>&#45;Dmetric-collect=default</tt> <br class="atl-forced-newline" />  <tt>&#45;Dmetric-cat=CATEGORY</tt> <br class="atl-forced-newline" />  <tt>&#45;Dmetric-indicator=true</tt> </td>
</tr>
<tr>
<td class='confluenceTd'> to fetch the metric template (but not metrics) for the jboss server </td>
<td class='confluenceTd'>  -m metric plugin-properties/jboss-4.2/melba_HQ_jBoss_4.x.properties -a translate  </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>
</div>


<h3><a name="hq-pdk.jarMethodsandFunctionality-Resultsreturnedby%5Cmetricmethoddefaultaction"></a>Results returned by &#45;metric method  default action</h3>

<p>Below is an excerpt from the results of running the default action of the metric method.&nbsp; Both metric templates and metric values are returned.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">JBoss 4.2 Availability:
jboss.system:service=MainDeployer:StateString:java.naming.provider.url=jnp%3A//0.0.0.0%3A2099,java.naming.security.principal=%java.naming.security.principal%,java.naming.security.credentials=
=&gt;100.0%&lt;=
JBoss 4.2 Active Thread Count:
jboss.system:type=ServerInfo:ActiveThreadCount:java.naming.provider.url=jnp%3A//0.0.0.0%3A2099,java.naming.security.principal=%java.naming.security.principal%,java.naming.security.credentials=
=&gt;125.0&lt;=
JBoss 4.2 Active Thread Group Count:
jboss.system:type=ServerInfo:ActiveThreadGroupCount:java.naming.provider.url=jnp%3A//0.0.0.0%3A2099,java.naming.security.principal=%java.naming.security.principal%,java.naming.security.credentials=
=&gt;15.0&lt;=
JBoss 4.2 JVM Free Memory:
jboss.system:type=ServerInfo:FreeMemory:java.naming.provider.url=jnp%3A//0.0.0.0%3A2099,java.naming.security.principal=%java.naming.security.principal%,java.naming.security.credentials=
=&gt;365.9 MB&lt;=</pre>
		</div>
</div></div>

<p>Note: Colons In metric templates appear as "%3A" in the results above. </p>

<h3><a name="hq-pdk.jarMethodsandFunctionality-Resultsreturnedbymetricmethodtranslateaction"></a>Results returned by metric method translate action</h3>

<p>This is an excerpt from the results of running the the metric method with the translate action. Metric templates, but not metric values, are returned.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">JBoss 4.2 Availability:
jboss.system:service=MainDeployer:StateString:java.naming.provider.url=jnp%3A//0.0.0.0%3A2099,java.naming.security.principal=%java.naming.security.principal%,java.naming.security.credentials=%java.naming.security.credentials%
JBoss 4.2 Active Thread Count:
jboss.system:type=ServerInfo:ActiveThreadCount:java.naming.provider.url=jnp%3A//0.0.0.0%3A2099,java.naming.security.principal=%java.naming.security.principal%,java.naming.security.credentials=%java.naming.security.credentials%
JBoss 4.2 Active Thread Group Count:
jboss.system:type=ServerInfo:ActiveThreadGroupCount:java.naming.provider.url=jnp%3A//0.0.0.0%3A2099,java.naming.security.principal=%java.naming.security.principal%,java.naming.security.credentials=%java.naming.security.credentials%
JBoss 4.2 JVM Free Memory:</pre>
		</div>
</div></div>
<p>Note: Colons In metric templates appear as "%3A" in the results above.</p>

<h2><a name="hq-pdk.jarMethodsandFunctionality-trackWatchforLogorConfigurationEvents"></a>track - Watch for Log or Configuration Events</h2>

<p>The <tt>track</tt> method watches for a log or configuration event.</p>

<p>The syntax for the <tt>track</tt> method is:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">java -jar /bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -p PluginName -t "ResourceType" -m track -a TrackAction -Dserver.config_track.files=TrackFiles</pre>
		</div>
</div></div>

<p>where:</p>
<ul>
	<li><tt>PluginName</tt> identifies the plugin to run.</li>
	<li><tt>ResourceType</tt> specifies a particular resource type managed by the plugin.</li>
</ul>


<ul>
	<li><tt>TrackAction</tt> specifies whether to track log events or configuration events:
	<ul>
		<li><tt>log</tt></li>
		<li><tt>track</tt></li>
	</ul>
	</li>
</ul>


<p><b>Note</b>: You could use a generated properties file instead of explicitly specifying:</p>
<ul>
	<li><tt>-pPluginName</tt></li>
	<li><tt>-t "}ResourceType</tt></li>
	<li><tt>-Dserver.config_track.files=TrackFiles</tt></li>
</ul>


<p>For an example of using a properties file see <a href="#hq-pdk.jarMethodsandFunctionality-SyntaxformetricMethodUsingResourcePropertiesFile">Syntax for metric Method Using Resource Properties File</a>.</p>

<h3><a name="hq-pdk.jarMethodsandFunctionality-Examples"></a>Examples</h3>

<p>In these examples, only the method invocation and command options are shown.&nbsp; The <tt>java -jar AgentHome/bundles/AgentBundle/pdk/lib/hq-pdk-VERSION.jar</tt> portion of the command is not shown.</p>

<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> To... </th>
<th class='confluenceTh'> Use... </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> track changes made to the <tt>/etc/httpd/httpd.conf</tt> file for an "Apache 2.0" server </td>
<td class='confluenceTd'> -p apache -t "Apache 2.0" -m track -a config -Dserver.config_track.files=/etc/httpd/httpd.conf </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> track log entries to <tt>/var/log/httpd/error_log</tt> for an "Apache 2.0" server </td>
<td class='confluenceTd'>-p apache -t "Apache 2.0" -m track -a log -Dserver.log_track.files=/var/log/httpd/error_log  </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> To exercise other configurable tracking behaviors, for instance to check the results of tracking log messages that do or do not contain a particular string, you must set the value of <b>server.log_track.exclude</b> or <b>server.log_track.include</b> on the command line. </td>
<td class='confluenceTd'> add the desired property definition to thecommand line, for example: <br class="atl-forced-newline" />
<tt>-Dserver.log_track.exclude=String</tt> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>
</div>


<h2><a name="hq-pdk.jarMethodsandFunctionality-controlPerformaControlActiononaResource"></a>control - Perform a Control Action on a Resource</h2>

<p>The <tt>control</tt> method can be used to perform a supported control action on a resource instance.</p>

<p>The syntax for the <tt>control</tt> method is:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">java -jar /bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -m control -a ControlAction -p PluginName -t ResourceType -Doption=value</pre>
		</div>
</div></div>
<p>where:</p>
<ul>
	<li><tt>PluginName</tt> identifies the plugin to run.</li>
</ul>


<ul>
	<li><tt>ResourceType</tt> specifies a particular resource type managed by the plugin.</li>
</ul>


<ul>
	<li><tt>ControlAction{</tt> specifies the action to perform.</li>
</ul>


<ul>
	<li>a <tt>-Doption=value</tt> for each resource configuration option sets the option's value.</li>
</ul>


<p><b>Note</b>: You could use a generated properties file instead of explicitly specifying resource configuration options. For an example of using a properties file see <a href="#hq-pdk.jarMethodsandFunctionality-SyntaxformetricMethodUsingResourcePropertiesFile">Syntax for metric Method Using Resource Properties File</a>.</p>

<h3><a name="hq-pdk.jarMethodsandFunctionality-Examples"></a>Examples</h3>

<p>In these examples, only the method invocation and command options are shown.&nbsp; The <tt>java -jar AgentHome/bundles/AgentBundle/pdk/lib/hq-pdk-VERSION.jar</tt> portion of the command is not shown.</p>

<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> To... </th>
<th class='confluenceTh'> Use... </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> run the "removeAllMessages" control action on a JMS destination </td>
<td class='confluenceTd'> -m control -p jboss -a removeAllMessages -t "JBoss 4.0 JMS Destination" -Djms.destination=DLQ -Djava.naming.naming.url=jnp://localhost:1099 </td>
<td class='confluenceTd'> In this example resource configuration data is supplied on the command line. </td>
</tr>
<tr>
<td class='confluenceTd'> run the "start" control action on a JBoss server </td>
<td class='confluenceTd'> -m control -a start plugin-properties/jboss-4.0/hammer_JBoss_4.0_all.properties</td>
<td class='confluenceTd'> In this example resource configuration data is supplied from a generated properties file. </td>
</tr>
<tr>
<td class='confluenceTd'> to exercise other configurable control behaviors, for instance to supply optional control action arguments, you must set value of the appropriate property, for instance <b>start.args</b> or <b>stop.args</b> on the command line. </td>
<td class='confluenceTd'> add desired property to the command line, for example: <br class="atl-forced-newline" />
-Dstart.args=SupportedStartArgument  </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>
</div>


<h2><a name="hq-pdk.jarMethodsandFunctionality-livedataFetchLiveSystemInformation"></a>livedata - Fetch Live System Information</h2>

<p>The <tt>livedata</tt> method obtains live system metrics and platform data. The data is returned live, rather than obtained from the HQ database, and is provided in XML format.</p>

<p>The syntax for the <tt>livedata</tt> method is:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -m livedata -t ResourceType -a LiveDataAction</pre>
		</div>
</div></div>

<p>where:</p>
<ul>
	<li><tt>}ResourceType</tt> is an operating system platform type name, one of:
	<ul>
		<li><tt>Linux</tt></li>
		<li><tt>AIX</tt></li>
		<li><tt>MacOSX</tt></li>
		<li><tt>HPUX</tt></li>
		<li><tt>NetBSD</tt></li>
		<li><tt>Win32</tt></li>
		<li><tt>OpenBSD</tt></li>
		<li><tt>Solaris</tt></li>
	</ul>
	</li>
</ul>


<ul>
	<li><tt>LiveDataAction</tt> is a one of these SIGAR commands:
	<ul>
		<li><tt>cpuinfo</tt> &#8212; CPU information for each CPU discovered.</li>
		<li><tt>cpuperc</tt> &#8212; CPU percentage usage.</li>
		<li><tt>top</tt> &#8212; Display system resource utilization summaries and process information. SIGAR's top command.requires a PTQL query to select which processes to display.</li>
		<li><tt>netstat</tt> return network connections information.</li>
		<li><tt>ifconfig</tt> &#8212; Display network interface configuration and metrics.</li>
		<li><tt>who</tt> &#8212; return information about all users currently on the local system.</li>
		<li><tt>df</tt> &#8212; Report filesytem disk space usage.</li>
	</ul>
	</li>
</ul>


<h3><a name="hq-pdk.jarMethodsandFunctionality-ResultsofcpuCommand"></a>Results of cpu Command</h3>

<p>This is an example of the results returned by the <tt>cpu</tt> command.&nbsp;</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">$java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -m livedata -t MacOSX -a cpu
&lt;org.hyperic.sigar.Cpu-array&gt;
&lt;org.hyperic.sigar.Cpu&gt;
&lt;user&gt;26101070&lt;/user&gt;
&lt;sys&gt;12908410&lt;/sys&gt;
&lt;nice&gt;829010&lt;/nice&gt;
&lt;idle&gt;236665670&lt;/idle&gt;
&lt;wait&gt;0&lt;/wait&gt;
&lt;irq&gt;0&lt;/irq&gt;
&lt;softIrq&gt;0&lt;/softIrq&gt;
&lt;stolen&gt;0&lt;/stolen&gt;
&lt;total&gt;276504160&lt;/total&gt;
&lt;/org.hyperic.sigar.Cpu&gt;
&lt;org.hyperic.sigar.Cpu&gt;
&lt;user&gt;31011100&lt;/user&gt;
&lt;sys&gt;8567260&lt;/sys&gt;
&lt;nice&gt;929150&lt;/nice&gt;
&lt;idle&gt;235996420&lt;/idle&gt;
&lt;wait&gt;0&lt;/wait&gt;
&lt;irq&gt;0&lt;/irq&gt;
&lt;softIrq&gt;0&lt;/softIrq&gt;
&lt;stolen&gt;0&lt;/stolen&gt;
&lt;total&gt;276503930&lt;/total&gt;
&lt;/org.hyperic.sigar.Cpu&gt;
&lt;/org.hyperic.sigar.Cpu-array&gt;</pre>
		</div>
</div></div>

<h3><a name="hq-pdk.jarMethodsandFunctionality-cpupercCommandResults"></a>cpuperc Command Results</h3>

<p>This is an example of the results returned by SIGAR's <tt>cpuperc</tt> command.&nbsp;&nbsp;
<br class="atl-forced-newline" /></p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">$java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -m livedata -t MacOSX -a cpuperc
&lt;org.hyperic.sigar.CpuPerc-array&gt;
&lt;org.hyperic.sigar.CpuPerc&gt;
&lt;user&gt;0.12&lt;/user&gt;
&lt;sys&gt;0.0&lt;/sys&gt;
&lt;nice&gt;0.0&lt;/nice&gt;
&lt;idle&gt;0.88&lt;/idle&gt;
&lt;wait&gt;0.0&lt;/wait&gt;
&lt;irq&gt;0.0&lt;/irq&gt;
&lt;softIrq&gt;0.0&lt;/softIrq&gt;
&lt;stolen&gt;0.0&lt;/stolen&gt;
&lt;combined&gt;0.12&lt;/combined&gt;
&lt;/org.hyperic.sigar.CpuPerc&gt;
&lt;org.hyperic.sigar.CpuPerc&gt;
&lt;user&gt;0.08&lt;/user&gt;
&lt;sys&gt;0.0&lt;/sys&gt;
&lt;nice&gt;0.0&lt;/nice&gt;
&lt;idle&gt;0.92&lt;/idle&gt;
&lt;wait&gt;0.0&lt;/wait&gt;
&lt;irq&gt;0.0&lt;/irq&gt;
&lt;softIrq&gt;0.0&lt;/softIrq&gt;
&lt;stolen&gt;0.0&lt;/stolen&gt;
&lt;combined&gt;0.08&lt;/combined&gt;
&lt;/org.hyperic.sigar.CpuPerc&gt;
&lt;/org.hyperic.sigar.CpuPerc-array&gt;</pre>
		</div>
</div></div>

<h3><a name="hq-pdk.jarMethodsandFunctionality-ifconfigCommandResults"></a>ifconfig Command Results</h3>

<p>This is an excerpt of example results returned by SIGAR's <tt>ifconfig</tt> command.&nbsp;&nbsp;&nbsp;</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">$java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -Dplugins.include=jboss -m livedata -t MacOSX -a ifconfig
&lt;interfaces
&lt;org.hyperic.hq.plugin.system.NetInterfaceData&gt;
&lt;config&gt;
&lt;name&gt;lo0&lt;/name&gt;
&lt;hwaddr&gt;00:00:00:00:00:00&lt;/hwaddr&gt;
&lt;type&gt;Local Loopback&lt;/type&gt;
&lt;description&gt;lo0&lt;/description&gt;
&lt;address&gt;127.0.0.1&lt;/address&gt;
&lt;destination&gt;127.0.0.1&lt;/destination&gt;
&lt;broadcast&gt;0.0.0.0&lt;/broadcast&gt;
&lt;netmask&gt;255.0.0.0&lt;/netmask&gt;
&lt;flags&gt;32841&lt;/flags&gt;
&lt;mtu&gt;16384&lt;/mtu&gt;
&lt;metric&gt;0&lt;/metric&gt;
&lt;/config&gt;
&lt;stat&gt;
&lt;rxBytes&gt;1718492625&lt;/rxBytes&gt;
&lt;rxPackets&gt;6594769&lt;/rxPackets&gt;
&lt;rxErrors&gt;0&lt;/rxErrors&gt;
&lt;rxDropped&gt;0&lt;/rxDropped&gt;
&lt;rxOverruns&gt;-1&lt;/rxOverruns&gt;
&lt;rxFrame&gt;-1&lt;/rxFrame&gt;
&lt;txBytes&gt;1718494642&lt;/txBytes&gt;
&lt;txPackets&gt;6594766&lt;/txPackets&gt;
&lt;txErrors&gt;0&lt;/txErrors&gt;
&lt;txDropped&gt;-1&lt;/txDropped&gt;
&lt;txOverruns&gt;-1&lt;/txOverruns&gt;
&lt;txCollisions&gt;0&lt;/txCollisions&gt;
&lt;txCarrier&gt;-1&lt;/txCarrier&gt;
&lt;speed&gt;0&lt;/speed&gt;
&lt;/stat&gt;
&lt;/org.hyperic.hq.plugin.system.NetInterfaceData&gt;
&lt;org.hyperic.hq.plugin.system.NetInterfaceData&gt;</pre>
		</div>
</div></div>
<p>Note: The output contains a <tt>&lt;org.hyperic.hq.plugin.system.NetInterfaceData&gt;</tt> element for each network interface discovered.</p>

<h3><a name="hq-pdk.jarMethodsandFunctionality-whoCommandResults"></a>who Command Results</h3>

<p>This is an excerpt of the results returned by SIGAR's <tt>who</tt> command.&nbsp;&nbsp;</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">$ java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -Dplugins.include=jboss -m livedata -t MacOSX -a who
&lt;org.hyperic.sigar.Who-array&gt;
&lt;org.hyperic.sigar.Who&gt;
&lt;user&gt;mmcgarry&lt;/user&gt;
&lt;device&gt;console&lt;/device&gt;
&lt;host&gt;&lt;/host&gt;
&lt;time&gt;1264178819&lt;/time&gt;
&lt;/org.hyperic.sigar.Who&gt;
&lt;org.hyperic.sigar.Who&gt;
&lt;user&gt;mmcgarry&lt;/user&gt;
&lt;device&gt;ttyp1&lt;/device&gt;
&lt;host&gt;&lt;/host&gt;
&lt;time&gt;1264185170&lt;/time&gt;
&lt;/org.hyperic.sigar.Who&gt;
&lt;org.hyperic.sigar.Who&gt;
&lt;user&gt;mmcgarry&lt;/user&gt;
&lt;device&gt;ttyp2&lt;/device&gt;
&lt;host&gt;&lt;/host&gt;
&lt;time&gt;1264181578&lt;/time&gt;
&lt;/org.hyperic.sigar.Who&gt;
&lt;/org.hyperic.sigar.Who-array&gt;</pre>
		</div>
</div></div>

<h2><a name="hq-pdk.jarMethodsandFunctionality-generateCreatePluginDocumentation"></a>generate - Create Plugin Documentation</h2>

<p>The <tt>generate</tt> method generates documentation from the plugin descriptor.</p>

<p>The syntax for the <tt>generate</tt> method is:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">java -jar bundles/agent-VERSION/pdk/lib/hq-pdk-VERSION.jar -p PluginName -m generate -a GenerateAction</pre>
		</div>
</div></div>

<p>where:</p>
<ul>
	<li><tt>PluginName</tt> &#45; identifies a plugin to document. If not specified, the action will be applied to all plugins.</li>
	<li><tt>GenerateAction</tt> specifies the type of docuementation to generate, one of:
	<ul>
		<li><tt>metrics-wiki</tt> &#45; Write a Confluence Wiki formatted summary of supported metrics to a file.</li>
		<li><tt>metrics-xml</tt> &#45; Output an XML-formatted summary of supported metrics for a resource type to stdout.</li>
		<li><tt>metrics-txt</tt> Output a text formatted summary of supported metrics to stdout.</li>
		<li><tt>help</tt> &#45; Output the contents of the <tt>&lt;help&gt;</tt> element for each resource type in plugin descriptor(s) to HTML files in the <tt>./plugin-help</tt> directory.</li>
	</ul>
	</li>
</ul>


<h3><a name="hq-pdk.jarMethodsandFunctionality-Syntax"></a>Syntax</h3>

<p>In these examples, only the method invocation and command options are shown.&nbsp; The <tt>java -jar AgentHome/bundles/AgentBundle/pdk/lib/hq-pdk-VERSION.jar</tt> portion of the command is not shown.</p>

<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> To... </th>
<th class='confluenceTh'> Use... <br class="atl-forced-newline" /> </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> document metrics in Confluence wiki format for all resource types in all plugins <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> <tt>&#45;m generate &#45;a metrics-wiki</tt> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> document metrics in text format for all resource types in all plugins </td>
<td class='confluenceTd'> <tt>&#45;m generate &#45;a metrics-txt</tt> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> document metrics in XML format for all resource types in all plugins </td>
<td class='confluenceTd'> <tt>&#45;m generate &#45;a metrics-xml</tt> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> generate a help page for all resource types in all plugins </td>
<td class='confluenceTd'> <tt>&#45;m generate &#45;a help</tt> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> limit results to the resource types managed by a single plugin, in this example, jboss </td>
<td class='confluenceTd'> add <tt>&#45;p jboss</tt> to the command line. </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>
</div>


				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Oct 29, 2012 13:01</font></td>
		    </tr>
	    </table>
    </body>
</html>
