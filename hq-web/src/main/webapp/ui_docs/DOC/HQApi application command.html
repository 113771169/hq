<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 4.6.5 : HQApi application command</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 4.6.5.html" title="vFabric Hyperic 4.6.5 Documentation Home">vFabric Hyperic 4.6.5 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 4.6.5 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-4.6.0.html">Hyperic 4.6.5 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 4.6.5 : HQApi application command
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 04, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <p>View Source</p>
<p><font color="gray"><em>Topics marked with</em></font> <font color="red">*</font> <font color="gray"><em>relate to features available only in vFabric Hyperic.</em></font></p>


<style type='text/css'>/*<![CDATA[*/
div.rbtoc1325699159759 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1325699159759 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1325699159759 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1325699159759'>
<ul>
    <li><a href='#HQApiapplicationcommand-Functionality'>Functionality</a></li>
    <li><a href='#HQApiapplicationcommand-applicationCommandOptions'>application Command Options</a></li>
<ul>
    <li><a href='#HQApiapplicationcommand-applicationlist'>application list</a></li>
<ul>
    <li><a href='#HQApiapplicationcommand-StructureofanApplicationResponse'>Structure of an ApplicationResponse</a></li>
    <li><a href='#HQApiapplicationcommand-AttributesinanApplicationResponse'>Attributes in an ApplicationResponse</a></li>
    <li><a href='#HQApiapplicationcommand-Exampleapplicationlist'>Example - application list</a></li>
</ul>
    <li><a href='#HQApiapplicationcommand-applicationsync'>application sync</a></li>
<ul>
    <li><a href='#HQApiapplicationcommand-ExampleCreateApplicationswithapplicationsync'>Example - Create Applications with application sync</a></li>
    <li><a href='#HQApiapplicationcommand-ExampleUpdateApplicationswithapplicationsync'>Example - Update Applications with application sync</a></li>
</ul>
    <li><a href='#HQApiapplicationcommand-applicationdelete'>application delete</a></li>
</ul>
</ul></div>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Related Topics</b><br />This page provides information for running an HQ API from the command line. Related topics include: 
<ul>
	<li><a href="vFabric Hyperic Web Services API.html" title="vFabric Hyperic Web Services API">vFabric Hyperic Web Services API</a> - brief introduction to the API.</li>
	<li><a href="HQApi Command-Line Tools.html" title="HQApi Command-Line Tools">HQApi Command&#45;Line Tools</a> - how to get started with the command line tools.</li>
	<li><a href="HQApi Java API.html" title="HQApi Java API">HQApi Java API</a> - about accessing the APIs programmatically.</li>
</ul>
</td></tr></table></div> 



<h1><a name="HQApiapplicationcommand-Functionality"></a>Functionality</h1>

<p>An authorized user can use the <b>application</b> command to create, update, and delete HQ application definitions.</p>



<p>For information about applications in Hyperic, see <a href="Resources, Resource Types and Inventory Types.html#Resources%2CResourceTypesandInventoryTypes-applications">About Applications in Hyperic</a>.</p>




<h1><a name="HQApiapplicationcommand-applicationCommandOptions"></a>application Command Options</h1>

<h2><a name="HQApiapplicationcommand-applicationlist"></a>application list</h2>

<p>The <b>application list</b> command returns a list of applications in the HQ deployment and the services assigned to each.</p>

<h3><a name="HQApiapplicationcommand-StructureofanApplicationResponse"></a>Structure of an ApplicationResponse</h3>

<p>The <tt>ApplicationResponse</tt> object returned by the <b>application list</b> command has this element structure:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">&lt;ApplicationResponse&gt;
    &lt;Application&gt;
        &lt;Resource.../&gt;
    &lt;/Application&gt;
&lt;/ApplicationResponse&gt;</pre>
		</div>
</div></div>

<p>where there is:</p>

<ul>
	<li>one <tt>&lt;Application&gt;</tt> element for each application.</li>
	<li>one <tt>&lt;Resource&gt;</tt> for each service assigned to the application.</li>
</ul>


<h3><a name="HQApiapplicationcommand-AttributesinanApplicationResponse"></a>Attributes in an ApplicationResponse</h3>

<p>This table defines the attributes in a <tt>ApplicationResponse</tt>.</p>

<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Element </th>
<th class='confluenceTh'> Attribute </th>
<th class='confluenceTh'> Description and Values </th>
<th class='confluenceTh'> Required* </th>
</tr>
<tr>
<td class='confluenceTd'> Application </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> bizContact </td>
<td class='confluenceTd'> The name of the business user concerned with the application. </td>
<td class='confluenceTd'> no </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> opsContact </td>
<td class='confluenceTd'> A contact name on operations. </td>
<td class='confluenceTd'> no </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> engContact <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> A contact name in engineering. <br class="atl-forced-newline" /> </td>
<td class='confluenceTd'> no <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> location </td>
<td class='confluenceTd'> Where the application runs, as applicable. </td>
<td class='confluenceTd'> no <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> description </td>
<td class='confluenceTd'> Short description of the application. </td>
<td class='confluenceTd'> no <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> name </td>
<td class='confluenceTd'> The name assigned to the application when it was configured in HQ. </td>
<td class='confluenceTd'> yes </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> id </td>
<td class='confluenceTd'> The internal HQ ID for the application. &nbsp;This value is assigned by HQ when the application is first created. After an application has been created, you can use the <b>application list</b> command to determine its ID. </td>
<td class='confluenceTd'> no <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> Resource </td>
<td class='confluenceTd'> id </td>
<td class='confluenceTd'> Internal HQ ID for the service. </td>
<td class='confluenceTd'> no </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> name </td>
<td class='confluenceTd'> Name of the service. </td>
<td class='confluenceTd'> no </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> description </td>
<td class='confluenceTd'> Description of the service </td>
<td class='confluenceTd'> no </td>
</tr>
</tbody></table>
</div>


<h3><a name="HQApiapplicationcommand-Exampleapplicationlist"></a>Example - application list</h3>
<p><a name="HQApiapplicationcommand-list"></a>In an HQ deployment with two applications, this command:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">application list</pre>
		</div>
</div></div>

<p>returns results similar to the following following:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">&lt;ApplicationsResponse&gt;
    &lt;Application id="10002" name="JBaway" description="" location="" engContact="" opsContact="" bizContact=""&gt;
        &lt;Resource id="10825" name="Ms-MacBook-Pro-15.local HQ PostgreSQL 8.2 eam_action" description=""/&gt;
        &lt;Resource id="10889" name="Ms-MacBook-Pro-15.local HQ PostgreSQL 8.2 eam_agent" description=""/&gt;
        &lt;Resource id="10908" name="Ms-MacBook-Pro-15.local HQ PostgreSQL 8.2 eam_agent_type" description=""/&gt;
        &lt;Resource id="10857" name="Ms-MacBook-Pro-15.local HQ PostgreSQL 8.2 eam_aiq_ip" description=""/&gt;
        &lt;Resource id="10920" name="Ms-MacBook-Pro-15.local HQ PostgreSQL 8.2 eam_aiq_platform" description=""/&gt;
        &lt;Resource id="10868" name="Ms-MacBook-Pro-15.local HQ PostgreSQL 8.2 eam_aiq_server" description=""/&gt;
        &lt;Resource id="10860" name="Ms-MacBook-Pro-15.local HQ PostgreSQL 8.2 eam_aiq_service" description=""/&gt;
    &lt;/Application&gt;
    &lt;Application id="10003" name="Pops" description="SF" location="Mezz" engContact="B. Phelp" opsContact="S. Townsend" bizContact="Jack Nok"&gt;
        &lt;Resource id="10930" name="Marie-McGarrys-MacBook-Pro-15.local HQ Tomcat 6.0 /jbossws-context Tomcat 6.0 Webapp" description=""/&gt;
        &lt;Resource id="11023" name="Marie-McGarrys-MacBook-Pro-15.local JBoss 4.2 default HQ Internals" description=""/&gt;
        &lt;Resource id="10988" name="Marie-McGarrys-MacBook-Pro-15.local JBoss 4.2 default ActionManager Stateless Session EJB" description=""/&gt;
        &lt;Resource id="10942" name="Marie-McGarrys-MacBook-Pro-15.local JBoss 4.2 default AgentManager Stateless Session EJB" description=""/&gt;
        &lt;Resource id="11028" name="Marie-McGarrys-MacBook-Pro-15.local JBoss 4.2 default agentScheduleQueue JMS Destination" description=""/&gt;
    &lt;/Application&gt;
&lt;/ApplicationsResponse&gt;</pre>
		</div>
</div></div>

<h2><a name="HQApiapplicationcommand-applicationsync"></a>application sync</h2>

<p>The <b>application sync</b> command can create new applications or update existing applications.</p>

<p>Command qualifiers:</p>
<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Qualifier </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Required</th>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-batchSize</tt> </td>
<td class='confluenceTd'> The number of applications in each batch of applications to be committed to the database. By default, the HQ server writes application updates in batches of 10. </td>
<td class='confluenceTd'> no </td>
</tr>
</tbody></table>
</div>



<h3><a name="HQApiapplicationcommand-ExampleCreateApplicationswithapplicationsync"></a>Example - Create Applications with application sync</h3>

<ol>
	<li>Create an XML file that contains an <tt>&lt;ApplicationsResponse&gt;</tt>, which in turn contains an <tt>&lt;Application&gt;</tt> for each application you want to create, as shown above in <a href="#HQApiapplicationcommand-list">Example - application list\</a>. (You may find it useful to use <b>application list</b> to list an existing application, and copy the XML to an editor as a starting point.)
	<ul>
		<li><b>Do not</b> specify an <tt>id</tt> for the applications to be created.</li>
		<li>Save the file with an .xml extension.</li>
	</ul>
	</li>
	<li>Pipe the file to the <b>application sync</b> command, for example:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">cat app.xml | bin/hqapi.sh application sync</pre>
		</div>
</div></div></li>
	<li>A message like this indicates success:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">Successfully synced 1 applications.</pre>
		</div>
</div></div></li>
</ol>


<h3><a name="HQApiapplicationcommand-ExampleUpdateApplicationswithapplicationsync"></a>Example - Update Applications with application sync</h3>

<ol>
	<li>Create an XML file that contains an <tt>&lt;ApplicationsResponse&gt;</tt>, which in turn contains an <tt>&lt;Application&gt;</tt> for each application you want to update. (You may find it useful to use <b>application list</b> to list existing applications, and copy the <tt>&lt;Application&gt;</tt> element for the applications you with to update to an editor as a starting point.)</li>
	<li>Update the contents of each <tt>&lt;Application&gt;</tt> element as desired:
	<ul>
		<li>To add a service to the application, add a&nbsp;<tt>&lt;Resource&gt;</tt> element that defines it to the each&nbsp;<tt>&lt;Application&gt;</tt>&nbsp;element, making sure not to delete any existing&nbsp;<tt>&lt;Resource&gt;</tt>&nbsp;elements.&nbsp;(The&nbsp;<b>application sync</b>&nbsp;command updates the list of member services to match the sync file.)&nbsp;</li>
		<li>To remove a service from the application, delete the corresponding <tt>&lt;resource&gt;</tt> element from the file.</li>
		<li>When editing the attributes of a <tt>&lt;Resource&gt;</tt> element, be sure not to edit or delete the <tt>id</tt> attribute.</li>
		<li>When editing the attributes of an <tt>&lt;Application&gt;</tt> element be sure not to edit or delete the <tt>id</tt> attribute. If <tt>id</tt> is not specified, a new application is created.</li>
	</ul>
	</li>
	<li>Save the file with an .xml extension.</li>
	<li>Pipe the file to the <b>application sync</b> command, for example:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">cat app.xml | bin/hqapi.sh application sync</pre>
		</div>
</div></div></li>
	<li>A message like this indications the command execution was successful:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">Successfully synced 1 applications.</pre>
		</div>
</div></div></li>
</ol>


<h2><a name="HQApiapplicationcommand-applicationdelete"></a>application delete</h2>

<p>The <b>application delete</b> command deletes an application from HQ inventory.</p>

<p><b>Note:</b> Deleting an application does not delete the services that are assigned to the application.</p>

<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Qualifier </th>
<th class='confluenceTh'> Description </th>
</tr>
<tr>
<td class='confluenceTd'> &#45;-id </td>
<td class='confluenceTd'> Internal HQ ID for the application </td>
</tr>
</tbody></table>
</div>


<p>Supply the ID of the application you wish to delete, for example:<br/>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">hqapi.sh application delete --id=10002</pre>
		</div>
</div></div>A message like this indicates success:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">Successfully deleted application id 10002</pre>
		</div>
</div></div>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Feb 07, 2012 15:57</font></td>
		    </tr>
	    </table>
    </body>
</html>
