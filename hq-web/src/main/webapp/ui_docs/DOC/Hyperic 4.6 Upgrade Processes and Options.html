<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <b><a href="vFabric Hyperic 4.6.html" title="vFabric Hyperic 4.6 Documentation Home">vFabric Hyperic 4.6 Documentation Home (Internal)</a> - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 4.6 Documentation Home (Online)</a> -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-4.6.0.html">Hyperic 4.6 Release Notes</a> </b>
<p>      
<p>
        <title>vFabric Hyperic 4.6 : Hyperic 4.6 Upgrade Processes and Options</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 4.6 : Hyperic 4.6 Upgrade Processes and Options
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jul 25, 2011 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <style type='text/css'>/*<![CDATA[*/
div.rbtoc1311628300225 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1311628300225 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1311628300225 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1311628300225'>
<ul>
    <li><a href='#Hyperic4.6UpgradeProcessesandOptions-Hyperic4.6UpgradeOptions'>Hyperic 4.6 Upgrade Options</a></li>
    <li><a href='#Hyperic4.6UpgradeProcessesandOptions-UpgradeHypericServerOnly'>Upgrade Hyperic Server Only</a></li>
    <li><a href='#Hyperic4.6UpgradeProcessesandOptions-UpgradeServerandAgentwithHypericManagedKeystores'>Upgrade Server and Agent with Hyperic-Managed Keystores</a></li>
    <li><a href='#Hyperic4.6UpgradeProcessesandOptions-UpgradeServerandAgentwithUserManagedKeystores'>Upgrade Server and Agent with User-Managed Keystores</a></li>
</ul></div>

<h1><a name="Hyperic4.6UpgradeProcessesandOptions-Hyperic4.6UpgradeOptions"></a>Hyperic 4.6 Upgrade Options</h1>

<p>This page has process guidelines for upgrading Hyperic components to version 4.6. Instructions are provided for several upgrade strategies. Consider your deployment and your security requirements in choosing the appropriate upgrade process. See <a href="Hyperic Security Features and Recommendations.html" title="Hyperic Security Features and Recommendations">Hyperic Security Features and Recommendations</a> for more information. The upgrade options are:</p>

<ul>
	<li>Upgrade Hyperic Server only &#8212; Hyperic Server 4.6 is backward-compatible with 4.x Hyperic Agents. You can upgrade the Hyperic Server to 4.6, and not upgrade the agents reporting to it. In this case, SSL communications between the server and agents will use unverified certificates.</li>
</ul>


<ul>
	<li>Upgrade Hyperic Server and Hyperic Agents with Hyperic-Managed Keystores &#8212; By default, the upgraded 4.6 Hyperic Server and 4.6 Hyperic Agents will generate SSL keystores and  use self-signed certificates for SSL communications.</li>
</ul>


<ul>
	<li>Upgrade Hyperic Server and Hyperic Agent with User-Managed Keystores &#8212; For best security, you can upgrade the Hyperic Server and all agents to 4.6, and configure the components to use keystores you configure yourself and certificates from a certificate authority.</li>
</ul>


<h1><a name="Hyperic4.6UpgradeProcessesandOptions-UpgradeHypericServerOnly"></a>Upgrade Hyperic Server Only</h1>

<p>To upgrade the Hyperic Server only, follow the instructions in <a href="Server Upgrade Procedure.html" title="Server Upgrade Procedure">Server Upgrade Procedure</a>.</p>

<h1><a name="Hyperic4.6UpgradeProcessesandOptions-UpgradeServerandAgentwithHypericManagedKeystores"></a>Upgrade Server and Agent with Hyperic-Managed Keystores</h1>

<ol>
	<li>Upgrade the Hyperic Server, following the instructions in <a href="Server Upgrade Procedure.html" title="Server Upgrade Procedure">Server Upgrade Procedure</a>.</li>
	<li>Upgrade all agents reporting to the Hyperic Server, following the instructions in <a href="Agent Upgrade Procedure.html" title="Agent Upgrade Procedure">Agent Upgrade Procedure</a>.</li>
</ol>


<h1><a name="Hyperic4.6UpgradeProcessesandOptions-UpgradeServerandAgentwithUserManagedKeystores"></a>Upgrade Server and Agent with User-Managed Keystores </h1>

<ol>
	<li>Create a SSL keystore in JKS format with certificates from your CA on the Hyperic Server host, and on each agent host.</li>
	<li>Upgrade the Hyperic Server, following the instructions in <a href="Server Upgrade Procedure.html" title="Server Upgrade Procedure">Server Upgrade Procedure</a>.</li>
	<li>Restart the Hyperic Server.</li>
	<li>Upgrade all agents reporting to the Hyperic Server to 4.6, following the instructions in <a href="Agent Upgrade Procedure.html" title="Agent Upgrade Procedure">Agent Upgrade Procedure</a>.
	<ul>
		<li>At this point, Hyperic Server and Hyperic Agents are running with self-signed certificates.</li>
	</ul>
	</li>
	<li>Shut down all Hyperic Agents.</li>
	<li>Shut down the Hyperic Server.</li>
	<li>Configure the Hyperic Server to use the keystore you created on its host. Edit <tt>ServerHome/conf/hq-server.conf</tt>:
	<ul>
		<li>Define the full path to the server keystore using the <tt>server.keystore.path</tt> property.</li>
		<li>Define the password for the server keystore using the <tt>server.keystore.password</tt> property.</li>
		<li>Verify that the <tt>accept.unverified.certificates</tt> is set to "false".</li>
	</ul>
	</li>
	<li>Configure each Hyperic Agent to use the keystore you created on its host. For each agent, edit <tt>AgentHome/conf/agent.properties</tt>:
	<ul>
		<li>Add <tt>agent.keystore.path</tt> to the properties file and set it to the full path to the keystore you created on the agent host.</li>
		<li>Add <tt>agent.keystore.password</tt> to the properties file and set it to the password for the keystore you created on the agent host.</li>
		<li>Verify that <tt>agent.setup.acceptUnverifiedCertificate</tt> is "false".</li>
	</ul>
	</li>
	<li>Start the Hyperic Server.</li>
	<li>Start all Hyperic Agents reporting to the Hyperic Server</li>
</ol>


				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jul 28, 2011 14:50</font></td>
		    </tr>
	    </table>
    </body>
</html>
