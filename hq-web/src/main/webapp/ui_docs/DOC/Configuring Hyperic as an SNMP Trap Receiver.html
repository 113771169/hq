<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 5.0 : Configuring Hyperic as an SNMP Trap Receiver</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 5.0.html" title="vFabric Hyperic 5.0 Documentation Home">vFabric Hyperic 5.0 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 5.0 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-5.0.html">Hyperic 5.0 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 5.0 : Configuring Hyperic as an SNMP Trap Receiver
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 04, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <p><a name="ConfiguringHypericasanSNMPTrapReceiver-top"></a></p>
<style type='text/css'>/*<![CDATA[*/
div.rbtoc1325699710308 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1325699710308 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1325699710308 li {margin-left: 0px;padding-left: 0px;}

/*]] >*/</style><div class='rbtoc1325699710308'>
<ul>
    <li><a href='#ConfiguringHypericasanSNMPTrapReceiver-ReceivingSNMPTrapsfromNetworkDevicesorSystems'>Receiving SNMP Traps from Network Devices or Systems</a></li>
    <li><a href='#ConfiguringHypericasanSNMPTrapReceiver-Step1SelectandEnableanAgenttoReceiveTraps'>Step 1 - Select and Enable an Agent to Receive Traps</a></li>
    <li><a href='#ConfiguringHypericasanSNMPTrapReceiver-Step2ConfigureTrapGenerator'>Step 2 - Configure Trap Generator</a></li>
    <li><a href='#ConfiguringHypericasanSNMPTrapReceiver-Step3CreateaProxyPlatformforTrapData'>Step 3 - Create a Proxy Platform for Trap Data</a></li>
    <li><a href='#ConfiguringHypericasanSNMPTrapReceiver-SolvingProblems'>Solving Problems</a></li>
</ul></div>

<h1><a name="ConfiguringHypericasanSNMPTrapReceiver-ReceivingSNMPTrapsfromNetworkDevicesorSystems"></a>Receiving SNMP Traps from Network Devices or Systems</h1>

<p>You can set up Hyperic to receive and log SNMP messages from a remote network management system or other SNMP-capable system or device. You can set alerts based on the received SNMP data to trigger notifications or other responses.</p>

<p>The process involves configuring the agent and the network system or device to communicate with each other, and creating a platform of type "Network Device" to represent the remote system or device.</p>

<h1><a name="ConfiguringHypericasanSNMPTrapReceiver-Step1SelectandEnableanAgenttoReceiveTraps"></a>Step 1 - Select and Enable an Agent to Receive Traps</h1>

<p>When you configure an platform of type "Network Device" you provide specify connection information for an Hyperic Agent running on an operating system in your environment - that agent will receive the SNMP data. The agent you designate must be able to receive traps.</p>

<p>Note that the Hyperic Agent's default UDP port for receiving traps is 162, in the privileged range, which the agent cannot access unless it runs as as root (or as an Administrative user on Windows).</p>

<p>If you run the agent under the context of an non-administrative user, configure a non-privileged port to receive SNMP traps, by adding this property to its <tt>agent.properties</tt> file.</p>

<p><tt>snmpTrapReceiver.listenAddress=udp:0.0.0.0/1620</tt></p>

<p>This setting enables the agent to receive traps through any interface on the platform at UDP port 1620. If desired, you can specify an specific interface's IP address, or different port in the unprivileged range (1024 or above). Restart the Hyperic Agent after defining the listen address.</p>
<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Why Don't I See the Open Port With `netstat`?</b><br />If you try to check that the SNMP port is open at this point, netstat will not show it open. Once you complete all steps in this procedure netstat output will produce expected results.</td></tr></table></div>

<h1><a name="ConfiguringHypericasanSNMPTrapReceiver-Step2ConfigureTrapGenerator"></a>Step 2 - Configure Trap Generator</h1>

<p>Set up the Hyperic Agent as a trap destination on the SNMP-enabled system or application, supplying the Hyperic Agent's SNMP listen address and port &#45;&nbsp; either the default connection settings, or if applicable, those configured in the previous step.</p>

<h1><a name="ConfiguringHypericasanSNMPTrapReceiver-Step3CreateaProxyPlatformforTrapData"></a>Step 3 - Create a Proxy Platform for Trap Data</h1>

<p>In Hyperic, remotely monitored resources are represented as a platform. To create a platform for the remote device or host:</p>
<ol>
	<li>Select <b>New Platform</b> from the <b>Tools</b> menu.
	<ul>
		<li>Click the thumbnail below to see the <b>New Platform</b> page.<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 1002x516" href='http://support.hyperic.com/download/attachments/79660206/NewPlatformNetworkDevice.png'><img src="attachments/thumbnails/79660206/79921775" style="border: 0px solid black"/></a></span></li>
	</ul>
	</li>
	<li>Enter a name for your platform.</li>
	<li>Select "Network Device" from the <b>Platform Type</b> pulldown.</li>
	<li>Enter the FQDN of the network device or host.</li>
	<li>Select the agent connection from the pulldown list - it must have connectivity to the SNMP port on the  device or host.</li>
	<li>Enter the IP address of the network device or host. Do not use 127.0.0.1, even if the application is local to the agent being used for the SNMP connection.</li>
	<li>The netmask or MAC address of the device or server may be required depending on the configuration of the device.</li>
	<li>Click <b>OK</b>.</li>
	<li>The <b>Inventory</b> tab for the new platform is displayed.</li>
	<li>Click <b>Edit</b> button in the <b>Configuration Properties</b> section.
	<ul>
		<li>Click the thumbnail below to see the <b>Configuration Properties</b> page.<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 1007x530" href='http://support.hyperic.com/download/attachments/79660206/NetworkDeviceConfigOptions.png'><img src="attachments/thumbnails/79660206/79921774" style="border: 0px solid black"/></a></span></li>
	</ul>
	</li>
	<li>Select the interface.index the device uses to uniquely identify interface services. Most devices work with the default ("ifDescr").</li>
	<li>Supply or validate the snmpIp, snmpPort and SNMP community string.</li>
	<li>Select the value for snmpVersion that corresponds to the device.&nbsp;</li>
	<li>If you use SNMP v3, it is likely that authentication is configured, in which case enter username, password and auth type.</li>
	<li>Check the box next to <b>Enable Log Tracking</b>, then click <b>OK</b>.</li>
</ol>


<p>Monitoring will start in a few minutes.</p>

<h1><a name="ConfiguringHypericasanSNMPTrapReceiver-SolvingProblems"></a>Solving Problems</h1>

<p>If the configuration is not accepted:</p>
<ul>
	<li>Verify the IP address, SNMP port, SNMP version, and authentication settings, as applicable.</li>
</ul>


<ul>
	<li>Verify that the agent you selected for the proxy platform has network connectivity and can reach the SNMP port of the network device (check firewalls).</li>
</ul>


<ul>
	<li>Make sure that the community string configured for the proxy platform is the same as the community string the trap generator uses to send traps. If the strings do not match, traps cannot be sent to the proxy platform - instead, traps will be routed to the default platform, if that platform has log tracking enabled.</li>
</ul>


<ul>
	<li>Check the Hyperic Agent log file to make sure that the agent has opened the proper UDP port. If properly configured, you should see messages similar to:
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>2008-06-05 16:45:05,447 DEBUG [SNMPTrapReceiver] snmpTrapReceiver.listenAddress=udp:0.0.0.0/1620
2008-06-05 16:45:05,572 DEBUG [SNMPTrapReceiver] Add 1:10003 for 10.2.0.2-switch
</pre>
</div></div></li>
</ul>


				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Oct 01, 2012 10:06</font></td>
		    </tr>
	    </table>
    </body>
</html>
