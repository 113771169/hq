<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 4.6.5 : Agent Configuration</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 4.6.5.html" title="vFabric Hyperic 4.6.5 Documentation Home">vFabric Hyperic 4.6.5 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 4.6.5 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-4.6.0.html">Hyperic 4.6.5 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 4.6.5 : Agent Configuration
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 04, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <p>The paragraphs that follow provide useful information about agent configuration data - how it is initially supplied, where it is saved, and how to change it. </p>
<style type='text/css'>/*<![CDATA[*/
div.rbtoc1325699524796 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1325699524796 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1325699524796 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1325699524796'>
<ul>
    <li><a href='#AgentConfiguration-AgentStartupConfigurationData'>Agent Startup Configuration Data</a></li>
    <li><a href='#AgentConfiguration-SupportedLocationsfor%7B%7Bagent.properties%7D%7D'>Supported Locations for <tt>agent.properties</tt></a></li>
    <li><a href='#AgentConfiguration-HowtoChangeAgentSetupConfigurationProperties'>How to Change Agent Setup Configuration Properties</a></li>
</ul></div> 


<h2><a name="AgentConfiguration-AgentStartupConfigurationData"></a>Agent Startup Configuration Data </h2>

<p>The configuration choices you must supply for the agent to start up specify where and how it communicates with the Hyperic Server, and vice versa. As described in [What Happens When an Agent Starts Up. you can supply these setup values either interactively or in the agent's properties file. </p>

<p>Note that upon successful startup, for future reference, the agent saves the server connection data in <tt>AgentHome/data</tt> and the Hyperic Server stores the agent's connection data in the Hyperic database. The agent creates the <tt>/data</tt> directory upon first successful startup. On subsequent startups, the agent will look at the connection data stored in its <tt>/data</tt> directory to determine where and how to connect to the Hyperic Server. </p>

<p>The agent properties that govern communications are the ones that are absolutely required for an agent to start up. In addition, there are a number of other agent properties that you can use to configure optional agent features and behaviors. Unlike the setup properties, which the agent obtains from its data directory and the Hyperic database, the properties that control optional agent behaviors are persisted only in <tt>agent.properties</tt>. </p>

<p>For a complete list of agent properties, see <a href="Agent Properties.html" title="Agent Properties">Agent Properties</a>. The setup properties related to communications with the Hyperic server are those whose name starts with "agent.setup"; see <a href="Configure Agent - Server Communication in Properties File.html#ConfigureAgent-ServerCommunicationinPropertiesFile-CommunicationPropertiesReference">Communication Properties Reference</a>. </p>

<h2><a name="AgentConfiguration-SupportedLocationsfor%7B%7Bagent.properties%7D%7D"></a>Supported Locations for <tt>agent.properties</tt> </h2>

<p><tt>agent.properties</tt> is installed in <tt>AgentHome/conf</tt>. </p>

<p>Note however, that agent first honors an external (from the agent installation) location for the properties file: an <tt>.hq</tt> directory under the home directory of the user under which the agent runs. If that directory does not exist, you can create it. (Under Windows, you can only create directory names with a leading period (.) in the DOS window (<tt>mkdir</tt>}. </p>

<p>Storing agent.properties external to the agent installation directory is useful, because some upgrade scenarios will overwrite the /conf directory.&nbsp; Specifically, upgrading an agent by installing a full agent package will overwrite your previous agent installation. This is relevant when you first upgrade an agent from 3.2.x or 3.1.x to 4.x, or if you choose to upgrade a 4.x agent to a later version by installing a full agent package. In these cases, if you don't keep the properties file in the .hq/ directory, back it up prior to upgrade, and restore it after upgrade. </p>

<p>Once you have an operational 4.x agent installation, you can upgrade it by installing an agent bundle only - you can perform this upgrade operation from the Hyperic user interface or using a manual procedure, if you prefer. When you upgrade the agent bundle only, the agent's /conf directory is not updated---this method preserves the agent.properties file within the agent installation through the upgrade. </p>

<h2><a name="AgentConfiguration-HowtoChangeAgentSetupConfigurationProperties"></a>How to Change Agent Setup Configuration Properties </h2>

<p>As described in <a href="Agent Launcher and Agent Startup.html" title="Agent Launcher and Agent Startup">Agent Launcher and Agent Startup</a>, you configure an agent's setup properties - the properties that begin with "agent.setup" - the first time you start it up. The properties that relate to where and how to contact the Hyperic server, are saved in the agent's /data directory; those related to how the server can reach the agent are stored in the Hyperic database. </p>

<p>If you need to make changes to those configuration values for an agent at a later time, you can delete the agent's /data directory, edit the agent.setup.&#42; properties in the agent.properties file, and restart the agent.&nbsp; You <em>must</em> use this method if you wish to change the agent's listen port---you cannot change port settings without restarting the agent. </p>

<p>If you prefer to change the startup configuration (other than agent listen port) without having to restart the agent, run the following command in a command shell, while the agent is running. </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">AgentHome/hq-agent.sh setup</pre>
		</div>
</div></div> 
<p>This will allow you to interactively supply new values for the setup properties, as described in <a href="Configure Agent - Server Communication Interactively.html" title="Configure Agent - Server Communication Interactively">Configure Agent &#45; Server Communication Interactively</a>. This will this cause all properties in the properties file to be re-read, and take effect.&nbsp; </p>

 

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jan 24, 2012 14:51</font></td>
		    </tr>
	    </table>
    </body>
</html>
