<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 4.6.5 : Install Hyperic Agents in Volume</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 4.6.5.html" title="vFabric Hyperic 4.6.5 Documentation Home">vFabric Hyperic 4.6.5 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 4.6.5 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-4.6.5.html">Hyperic 4.6.5 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 4.6.5 : Install Hyperic Agents in Volume
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 04, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <style type='text/css'>/*<![CDATA[*/
div.rbtoc1325706347447 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1325706347447 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1325706347447 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1325706347447'>
<ul>
    <li><a href='#InstallHypericAgentsinVolume-EstablishInstallationEnvironment'>Establish Installation Environment</a></li>
<ul>
    <li><a href='#InstallHypericAgentsinVolume-SetupanInstallServer'>Set up an Install Server</a></li>
    <li><a href='#InstallHypericAgentsinVolume-EstablishEnvironmentonTargetPlatforms'>Establish Environment on Target Platforms</a></li>
</ul>
    <li><a href='#InstallHypericAgentsinVolume-CreateStandardAgentPropertiesFile'>Create Standard Agent Properties File</a></li>
    <li><a href='#InstallHypericAgentsinVolume-PerformRemoteAgentInstallations'>Perform Remote Agent Installations</a></li>
<ul>
    <li><a href='#InstallHypericAgentsinVolume-InstallandStartAgentsOnebyOne'>Install and Start Agents One-by-One</a></li>
    <li><a href='#InstallHypericAgentsinVolume-DeployandStartMultipleAgentsatOnce'>Deploy and Start Multiple Agents at Once</a></li>
</ul>
    <li><a href='#InstallHypericAgentsinVolume-VerifySuccessfulAgentStartup'>Verify Successful Agent Startup</a></li>
</ul></div>

<blockquote>

<p><b>About this page...</b> </p>

<p>This page has recommendations for how to deploy agents in volume in a large Hyperic environment. Before performing the steps below, see <a href="Hyperic Installation and Startup Process.html" title="Hyperic Installation and Startup Process">Hyperic Installation and Startup Process</a> for information about prerequisite steps. The instructions below are one way to perform <a href="Hyperic Installation and Startup Process.html#HypericInstallationandStartupProcess-SetupAgent">Step 4 - Set Up the Hyperic Agent</a> of that process.</p></blockquote> 


<h1><a name="InstallHypericAgentsinVolume-EstablishInstallationEnvironment"></a>Establish Installation Environment</h1>

<h2><a name="InstallHypericAgentsinVolume-SetupanInstallServer"></a>Set up an Install Server</h2>

<p>Choose a machine that can access all target platforms from which to perform remote installation. We refer to this as the "install server". On the install server, create a user account, for instance "hyperic", with  permissions required to SSH into each target platform without a password.</p>

<h2><a name="InstallHypericAgentsinVolume-EstablishEnvironmentonTargetPlatforms"></a>Establish Environment on Target Platforms</h2>

<p>On each platform on which you will install the Hyperic Agent:</p>

<ul>
	<li>Create an user account that is identical to the one you created on the install server.</li>
</ul>


<ul>
	<li>Create identical installation directories, for example, <tt>/home/hyperic</tt>.</li>
</ul>


<ul>
	<li>Set up a trusted keystore, if desired.  See <a href="Configure SSL Options.html#ConfigureSSLOptions-New">SSL Setup for New Hyperic Installations</a> on <a href="Configure SSL Options.html" title="Configure SSL Options">Configure SSL Options</a> for recommendations.</li>
</ul>


<h1><a name="InstallHypericAgentsinVolume-CreateStandardAgentPropertiesFile"></a>Create Standard Agent Properties File</h1>

<p>To enable mass agent deployment, you create an <tt>agent.properties</tt> that defines the agent properties required for the agent to start up and connect with the Hyperic Server.  If you supply the necessary information in the properties file, each Hyperic Agent will find its setup configuration at startup, rather querying for it interactively.</p>

<p>For example, you can create a standard agent profile that you can copy to the agent installation, or to a location available to the agent installation.</p>

<p>In a standard <tt>agent.properties</tt> &#8212; one that you can deploy to multiple agents that report to the same Hyperic Server, you do not edit the properties that specify an agent's listen address and port. At first startup, if explicit values for IP address and port are not set, the Hyperic Agent - which detects the network interfaces on the platform - uses the first detected interface as its listen address, and port 2144 or 2443 as its listen port, depending on whether you configure the agent for plain text or SSL communications.</p>

<p>At a minimum, you must define the Hyperic Server address and port. In addition, you can configure optional agent behaviors that are controlled by agent properties.  For more information, see <a href="Set Up Agent in Properties File.html" title="Set Up Agent in Properties File">Set Up Agent in Properties File</a>.</p>

<p>The first time you start the agent, it will read its properties file for the server connection information, connect to the server,  and register itself.</p>

<h1><a name="InstallHypericAgentsinVolume-PerformRemoteAgentInstallations"></a>Perform Remote Agent Installations</h1>

<h2><a name="InstallHypericAgentsinVolume-InstallandStartAgentsOnebyOne"></a>Install and Start Agents One-by-One</h2>

<p>Follow these steps to install agents one-by-one. To install to all target platforms at once, see <a href="#InstallHypericAgentsinVolume-DeployandStartMultipleAgentsatOnce">Deploy and Start Multiple Agents at Once</a> below.</p>
<ol>
	<li>Log on to your installation account on the install server.</li>
	<li>SSH to the remote platform.</li>
	<li>Copy the agent archive to the agent host.</li>
	<li>Unpack the agent archive.</li>
	<li>Copy the <tt>agent.properties file</tt> to the <tt>/.hq</tt> directory under the home directory of the standard agent installation user account.</li>
	<li>Start the new agent.</li>
</ol>


<h2><a name="InstallHypericAgentsinVolume-DeployandStartMultipleAgentsatOnce"></a>Deploy and Start Multiple Agents at Once</h2>

<p>Follow these step to install and start the agent on multiple hosts: </p>
<ol>
	<li>Create a <tt>hosts.txt</tt> file on your install server that maps hostname to IP address for each platform to which you wish to install the agent.</li>
	<li>Open a command shell on the install server.</li>
	<li>Entering the following commandd in the shell, supplying the correct name of the agent package in the export command:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">$ export AGENT=hyperic-hq-agent-4.6.0-x86-linux.tgz
$ for host in `cat hosts.txt`; do scp $AGENT $host:&lt;/path/to/agent/install&gt; &amp;&amp; ssh $host "tar zxf $AGENT &amp;&amp; ./hyperic-hq-agent-4.6.0/hq-agent.sh start"; done</pre>
		</div>
</div></div></li>
</ol>


<blockquote>
<p>If target hosts have sequential names (for example, host001, host002, host003, etc), you can skip the hosts.txt file and use the seq command like this:</p>

<p><tt>$ export AGENT=hyperic-hq-agent-4.6.0-x86-linux.tgz</tt><br/>
<tt>$ for i in `seq 1 9`; do scp $AGENT host$i: &amp;&amp; ssh host$i "tar zxf $AGENT &amp;&amp; ./hyperic-hq-agent-4.6.0/hq-agent.sh start"; done</tt></p></blockquote>

<h1><a name="InstallHypericAgentsinVolume-VerifySuccessfulAgentStartup"></a>Verify Successful Agent Startup</h1>

<p>After registering itself with the Hyperic Server, an Hyperic Agent runs an auto-discovery scan, and should discover its host platform, and supported managed products running on the platform. Check the <b>Auto-Discovery</b> portlet in the Hyperic Dashboard to verify the the platforms were discovered.</p>

<p>If you have problems, see <a href="Troubleshoot Agent and Server Problems.html" title="Troubleshoot Agent and Server Problems">Troubleshoot Agent and Server Problems</a>.</p>



				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Feb 28, 2012 11:11</font></td>
		    </tr>
	    </table>
    </body>
</html>
