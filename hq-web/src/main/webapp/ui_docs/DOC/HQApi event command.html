<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Hyperic 4.6 Documentation : HQApi event command</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Hyperic 4.6 Documentation : HQApi event command
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jun 21, 2011 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <p><font color="gray"><em>Topics marked with</em></font> <font color="red">*</font> <font color="gray"><em>relate to features available only in vFabric Hyperic.</em></font></p>


<style type='text/css'>/*<![CDATA[*/
div.rbtoc1308676705158 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1308676705158 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1308676705158 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1308676705158'>
<ul>
    <li><a href='#HQApieventcommand-Functionality'>Functionality</a></li>
    <li><a href='#HQApieventcommand-eventCommandOptions'>event Command Options</a></li>
<ul>
    <li><a href='#HQApieventcommand-eventlist'>event list</a></li>
<ul>
    <li><a href='#HQApieventcommand-StructureofanEventsResponse'>Structure of an EventsResponse</a></li>
    <li><a href='#HQApieventcommand-AttributesinanEventResponseElement'>Attributes in an EventResponse Element</a></li>
</ul>
</ul>
    <li><a href='#HQApieventcommand-eventCommandExamples'>event Command Examples</a></li>
<ul>
    <li><a href='#HQApieventcommand-eventlist%5CresourceId'>event list --resourceId</a></li>
    <li><a href='#HQApieventcommand-eventlist'>event list</a></li>
    <li><a href='#HQApieventcommand-ExampleEventElementforDifferentEventTypes'>Example Event Element for Different Event Types</a></li>
    <li><a href='#HQApieventcommand-EventElementforanAlertEvent'>Event Element for an Alert Event</a></li>
    <li><a href='#HQApieventcommand-EventElementforanControlActionEvent'>Event Element for an Control Action Event</a></li>
    <li><a href='#HQApieventcommand-EventElementforanLogEvent'>Event Element for an Log Event</a></li>
    <li><a href='#HQApieventcommand-EventElementforanConfigurationEvent'>Event Element for an Configuration Event</a></li>
</ul>
</ul></div>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Related Topics</b><br />This page provides information for running an HQ API from the command line. Related topics include: 
<ul>
	<li><a href="vFabric Hyperic Web Services API.html" title="vFabric Hyperic Web Services API">vFabric Hyperic Web Services API</a> - brief introduction to the API.</li>
	<li><a href="HQApi Command-Line Tools.html" title="HQApi Command-Line Tools">HQApi Command&#45;Line Tools</a> - how to get started with the command line tools.</li>
	<li><a href="HQApi Java API.html" title="HQApi Java API">HQApi Java API</a> - about accessing the APIs programmatically.</li>
</ul>
</td></tr></table></div> 


<div class="scroll-pagebreak"></div>

<h1><a name="HQApieventcommand-Functionality"></a>Functionality</h1>

<p>The <b>event</b> command returns data about events - for fired alerts, for resource control actions that were performed, and (if you have so configured) for log and configuration change events that meet the tracking criteria defined for the resource. </p>

<p>For information about Hyperic's event tracking functionality, see <a href="Log and Configuration Event Tracking.html" title="Log and Configuration Event Tracking">Log and Configuration Event Tracking</a>.</p>

<p>You can list the events for either a particular resource instance, or for all resources.</p>

<h1><a name="HQApieventcommand-eventCommandOptions"></a>event Command Options</h1>

<p>This section defines command options.</p>

<h2><a name="HQApieventcommand-eventlist"></a>event list</h2>

<p>The <b>event list</b> command returns events for a resource instance, or for all resource instances.</p>

<p>Command qualifiers:</p>
<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Qualifier </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Required </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>&#45;-resourceId</tt> </td>
<td class='confluenceTd'> Internal HQ ID for a resource. If supplied, only events for that resource are returned. (See <a href="HQApi Command-Line Tools.html#HQApiCommand-LineTools-FindID">How to Find a Resource ID</a>.) </td>
<td class='confluenceTd'> no </td>
</tr>
</tbody></table>
</div>


<h3><a name="HQApieventcommand-StructureofanEventsResponse"></a>Structure of an EventsResponse</h3>

<p>The <tt>&lt;EventsResponse&gt;</tt> object returned by the <b>event list</b> command has this element structure:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">&lt;EventsResponse&gt;
    &lt;Event.../&gt;
&lt;/EventsResponse&gt;</pre>
		</div>
</div></div>

<p>where there is one <tt>&lt;event&gt;</tt> element for each event returned.</p>

<h3><a name="HQApieventcommand-AttributesinanEventResponseElement"></a>Attributes in an EventResponse Element</h3>

<p>This table defines the attributes in a <tt>&lt;EventsResponse&gt;</tt>.</p>


<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Element </th>
<th class='confluenceTh'> Attribute </th>
<th class='confluenceTh'> Description and Values </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>&lt;EventsResponse&gt;</tt> </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> <tt>resourceID</tt> </td>
<td class='confluenceTd'> Internal HQ ID for the resource. (See <a href="HQApi Command-Line Tools.html#HQApiCommand-LineTools-FindID">How to Find a Resource ID</a>.) </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> <tt>status</tt> </td>
<td class='confluenceTd'> Indicates the nature of the event. If the event is: <br class="atl-forced-newline" />
<ul>
	<li>alert event - <tt>status</tt> will be <tt>ALR</tt></li>
	<li>control action event - <tt>status</tt> will be <tt>Completed</tt> or <tt>Failed</tt></li>
	<li>log event - status will be one of: <tt>"INF"</tt>, <tt>"WRN"</tt>, <tt>"ERR"</tt>, or "<tt>DBG"</tt></li>
	<li>configuration event - status will be&nbsp;<tt>"INF"</tt></li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> <tt>user</tt> </td>
<td class='confluenceTd'> The <tt>user</tt> attribute provides different information, depending on event type:&nbsp; <br class="atl-forced-newline" />
<ul>
	<li>alert event - <tt>user</tt>&nbsp;is the name of the associated alert definition.</li>
	<li>control action event - <tt>user</tt> is the HQ user account under which the action was performed.</li>
	<li>log event - <tt>user</tt>&nbsp;is the path/name of the tracked log file (or, on Windows, the name of Windows log) to which the tracked message was written.</li>
	<li>configuration event &#45;&nbsp;<tt>user</tt>&nbsp;is the&nbsp;file path/name of the tracked file.</li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> <tt>ctime</tt> </td>
<td class='confluenceTd'> When the event occurred, in timestamp in milliseconds from epoch. </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> <tt>type</tt> </td>
<td class='confluenceTd'> Type of event object. <br class="atl-forced-newline" />
<ul>
	<li>alert event - org.hyperic.hq.events.AlertFiredEvent</li>
	<li>control action event&nbsp;-&nbsp; org.hyperic.hq.control.ControlEvent</li>
	<li>log event - org.hyperic.hq.measurement.shared.ResourceLogEvent</li>
	<li>configuration &nbsp;event &nbsp;&#45; org.hyperic.hq.measurement.shared.ConfigChangedEvent <br class="atl-forced-newline" /></li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> <tt>detail</tt> </td>
<td class='confluenceTd'> The <tt>detail</tt> attribute provides different information, depending on event type. <br class="atl-forced-newline" />
<ul>
	<li>alert event - value varies by the type of alert condition, it could be one of:
	<ul>
		<li>the metric value that satisfied a metric-based condition.</li>
		<li>the new value of the inventory property that the alert condition was based on.</li>
		<li>the control action that was performed, for an alert condition based on a control action.</li>
	</ul>
	</li>
	<li>log event - <tt>detail</tt> will contain both:
	<ul>
		<li>the full path to the file, or for windows, name of event log, and</li>
		<li>the message written to the log.</li>
	</ul>
	</li>
	<li>configuration event - <tt>detail</tt> will contain:
	<ul>
		<li>when the tracked file was changed and when the Inode for the file was changed.</li>
		<li>system groups that have access to the file.</li>
		<li>size of the tracked file in bytes before and after modification.</li>
		<li>Inode for&nbsp;tracked file before and after the change.</li>
	</ul>
	</li>
</ul>
</td>
</tr>
</tbody></table>
</div>


<h1><a name="HQApieventcommand-eventCommandExamples"></a>event Command Examples</h1>


<h2><a name="HQApieventcommand-eventlist%5CresourceId"></a>event list &#45;-resourceId</h2>

<p>This command returns events for the resource whose internal HQ ID is 10781:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">sh bin/hqapi.sh event list --resourceId=10781</pre>
		</div>
</div></div>

<p>The command results are:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">&lt;EventsResponse&gt;
&lt;Status&gt;Success&lt;/Status&gt;
&lt;Event resourceId="10781" status="INF" user="/Applications/hqEE43-1433/server-4.3.0-EE/hq-engine/server/default/../../../logs/server.log" ctime="1275056690366" type="org.hyperic.hq.measurement.shared.ResourceLogEvent" detail="/Applications/hqEE43-1433/server-4.3.0-EE/hq-engine/server/default/../../../logs/server.log: 2010-05-28 07:24:11,917 INFO [Scheduler-2] [org.hyperic.hq.auth.shared.SessionManager@51] done cleaning up expired sessions (0 expired sessions)"/&gt;
...
&lt;Event resourceId="10781" status="WRN" user="/Applications/hqEE43-1433/server-4.3.0-EE/hq-engine/server/default/../../../logs/server.log" ctime="1275060530465" type="org.hyperic.hq.measurement.shared.ResourceLogEvent" detail="/Applications/hqEE43-1433/server-4.3.0-EE/hq-engine/server/default/../../../logs/server.log: 2010-05-28 08:28:33,142 WARN [Thread-4046] [org.hyperic.hq.bizapp.server.session.LatherDispatcher@217] Unauthorized agent from 192.168.0.7 denied"/&gt;
&lt;/EventsResponse&gt;</pre>
		</div>
</div></div>

<h2><a name="HQApieventcommand-eventlist"></a>event list</h2>

<p>This command lists all events for all resources:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">sh bin/hqapi.sh event list</pre>
		</div>
</div></div>

<p>The results returned are that same as those in the example above, but include events for all resources.</p>

<h2><a name="HQApieventcommand-ExampleEventElementforDifferentEventTypes"></a>Example Event Element for Different Event Types</h2>


<h2><a name="HQApieventcommand-EventElementforanAlertEvent"></a>Event Element for an Alert Event</h2>

<p>This is the result returned for an alert event:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">Event resourceId="10781" status="ALR" user="ThreadCount" ctime="1274811000000" type="org.hyperic.hq.events.AlertFiredEvent" detail="130.0"/&gt;</pre>
		</div>
</div></div>

<p>These results indicate that:</p>
<ul>
	<li>An alert whose definition is named "ThreadCount" fired.</li>
	<li>The triggering metric value was "130.0".</li>
	<li>The event type is "org.hyperic.hq.events.AlertFiredEvent".</li>
</ul>


<h2><a name="HQApieventcommand-EventElementforanControlActionEvent"></a>Event Element for an Control Action Event</h2>

<p>This is the result returned for a control action event:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">&lt;Event resourceId="10786" status="Completed" user="hqadmin" ctime="1274900999202" type="org.hyperic.hq.control.ControlEvent" detail="Vacuum"/&gt;</pre>
		</div>
</div></div>

<p>These results indicate that:</p>
<ul>
	<li>The "Vacuum" control action was initiated and completed.</li>
	<li>The HQ user that ran the control action &nbsp;was "hqadmin".</li>
	<li>The event type is "org.hyperic.hq.control.ControlEvent".</li>
</ul>


<h2><a name="HQApieventcommand-EventElementforanLogEvent"></a>Event Element for an Log Event</h2>

<p>This is the result returned for a log event:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">&lt;Event resourceId="10781" status="INF" user="/Applications/hqEE43-1433/server-4.3.0-EE/hq-engine/server/default/../../../logs/server.log" ctime="1274820000805" type="org.hyperic.hq.measurement.shared.ResourceLogEvent" detail="/Applications/hqEE43-1433/server-4.3.0-EE/hq-engine/server/default/../../../logs/server.log: 2010-05-25 13:36:28,919 INFO [http-0.0.0.0-7080-5|http-0.0.0.0-7080-5] \[\] 192.168.0.15:2144 \-&gt; track:trackAdd"/&gt;</pre>
		</div>
</div></div>

<p>These results indicate that:</p>
<ul>
	<li>A message of level "INF" was written to the <tt>server.log</tt> file.</li>
	<li>The message was "="/Applications/hqEE43-1433/server-4.3.0-EE/hq-engine/server/default/../../../logs/server.log: 2010-05-25 13:36:28,919 INFO http-0.0.0.0-7080-5 [] 192.168.0.15:2144 &#45;&gt; track:trackAdd"/&gt;.</li>
	<li>The event type is "org.hyperic.hq.measurement.shared.ResourceLogEvent".</li>
</ul>


<h2><a name="HQApieventcommand-EventElementforanConfigurationEvent"></a>Event Element for an Configuration Event</h2>

<p>This is the result returned for a configuration event:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">&lt;Event resourceId="10781" status="INF" user="/Applications/hqEE43-1433/server-4.3.0-EE/hq-engine/server/default/conf/jboss-service.xml" ctime="1274821140999" type="org.hyperic.hq.measurement.shared.ConfigChangedEvent" detail="{Mtime: May 25 12:58|May 25 13:58}{Gid: 80|20}{Size: 34293|34306}{Inode: 3169904|3203869}"/&gt;</pre>
		</div>
</div></div>

<p>These results indicate that:</p>
<ul>
	<li>The <tt>jboss-service.xml</tt> file was modified on May 25 at 12:58, the Inode for the file was updated on May 25 at 13:58.</li>
	<li>The group IDs of the system groups that have access to the file are "80" and 20".</li>
	<li>The file size changed from 34293 to 34306 bytes.</li>
	<li>The file Inode changed from 3169904 to 3203869.</li>
	<li>The event type is "org.hyperic.hq.measurement.shared.ConfigChangedEvent".</li>
</ul>


				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jun 29, 2011 14:49</font></td>
		    </tr>
	    </table>
    </body>
</html>
