<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 4.6.5 : Configure Agent Logging</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 4.6.5.html" title="vFabric Hyperic 4.6.5 Documentation Home">vFabric Hyperic 4.6.5 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 4.6.5 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-4.6.0.html">Hyperic 4.6.5 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 4.6.5 : Configure Agent Logging
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 06, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <p><font color="gray"><em>Topics marked with</em></font> <font color="red">*</font> <font color="gray"><em>relate to features available only in vFabric Hyperic.</em></font></p>

 
<style type='text/css'>/*<![CDATA[*/
div.rbtoc1328564909481 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1328564909481 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1328564909481 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1328564909481'>
<ul>
    <li><a href='#ConfigureAgentLogging-AgentLogFiles'>Agent Log Files</a></li>
    <li><a href='#ConfigureAgentLogging-ConfigureAgentLogNameorLocation'>Configure Agent Log Name or Location</a></li>
    <li><a href='#ConfigureAgentLogging-ConfigureAgentLoggingLevel'>Configure Agent Logging Level</a></li>
    <li><a href='#ConfigureAgentLogging-RedirectSystemMessagestotheAgentLog'>Redirect System Messages to the Agent Log</a></li>
    <li><a href='#ConfigureAgentLogging-ConfigureDebugLogLevelforanAgentSubsystem'>Configure Debug Log Level for an Agent Subsystem</a></li>
</ul></div> 
 

<h1><a name="ConfigureAgentLogging-AgentLogFiles"></a>Agent Log Files </h1>

<p>Agent log files are stored in the <tt>AgentHome/log</tt> directory. They include: </p>

<ul>
	<li><tt>agent.log</tt></li>
	<li><tt>agent.startup.log</tt></li>
	<li><tt>wrapper.log</tt> - The agent JSW-based launcher writes messages to this log.</li>
</ul>


<h1><a name="ConfigureAgentLogging-ConfigureAgentLogNameorLocation"></a>Configure Agent Log Name or Location </h1>

<p>Use these properties to change the name or location of the agent log file: </p>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>agent.logDir</b><br /><b>Description</b>

<p>You can add this property to the <tt>agent.properties</tt>  file to specify the directory where the Hyperic Agent will write its log file. Unless you specify a fully qualified path, <tt>agent.logDir</tt>  is evaluated relative to the agent installation directory.</p>

<p>This property does not exist in <tt>agent.properties</tt> unless you explicitly add it.&nbsp; To change the location for the agent log file, add <tt>agent.logDir</tt>&nbsp; to <tt>agent.properties</tt> and enter a path relative to the agent installation directory, or if desired, a fully qualified path.</p>

<p>Note that the name of the agent log file is configured with the <tt><a href="agent.logFile.html" title="agent.logFile">agent.logFile</a></tt> property.</p>

<p><b>Default</b></p>

<p><tt>agent.logDir</tt> does not exist in <tt>agent.properties</tt> unless you explicitly add it.&nbsp; The default behavior is equivalent to this setting:</p>

<p><tt>agent.logDir=log</tt></p>

<p>resulting in the agent log file being written to the <tt>AgentHome/log</tt> directory.</p></td></tr></table></div> 


<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>agent.logFile</b><br /><b>Description</b>

<p>Specifies the path and name of the agent log file.</p>

<p><b>Default</b></p>

<p>Note that in <tt>agent.properties</tt>, the default setting for <tt>agent.LogFile</tt> is made up of a variable and a string.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<script type="syntaxhighlighter" class="theme: Confluence; brush: java; gutter: false"><![CDATA[agent.logFile=${agent.logDir}\agent.log]]></script>
</div></div>
<ul>
	<li><tt>agent.logDir</tt> is a variable - it supplies the value of an identically named agent property. By default, the value of <tt>agent.logDir</tt> is <tt>log</tt>, interpreted relative to the agent installation directory.</li>
</ul>


<ul>
	<li><tt>agent.log</tt> is the name for the agent log file.</li>
</ul>


<p>So, by default, the agent log file is named <tt>agent.log</tt>, and is written to the <tt>AgentHome/log</tt> directory.</p>

<p>If you want the agent to the log to a different directory, you must explicitly add the <a href="agent.logDir.html" title="agent.logDir">agent.logDir</a> property to <tt>agent.properties</tt>. </p></td></tr></table></div> 

<h1><a name="ConfigureAgentLogging-ConfigureAgentLoggingLevel"></a>Configure Agent Logging Level </h1>

<p>Use this property to control what severity of messages that agent writes to the agent log file: </p>
<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>agent.logLevel</b><br /><b>Description</b><br/>
Specifies the level of detail of the messages the Agent writes to the log file.  Allowable values are:  INFO and DEBUG.<br/>
<b>Default</b><br/>
INFO</td></tr></table></div> 

<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Setting the <tt>agent.logLevel</tt> to to "DEBUG" level is not advised. This level of logging across all subsystems will impose overhead, and can also cause the log file to roll over so frequently that log messages of interest are lost. It is preferable to configure debug level logging only at the subsystem level, as described in <a href="#ConfigureAgentLogging-ConfigureDebugLogLevelforanAgentSubsystem">Configure Debug Log Level for an Agent Subsystem</a>.</td></tr></table></div> 

<h1><a name="ConfigureAgentLogging-RedirectSystemMessagestotheAgentLog"></a>Redirect System Messages to the Agent Log </h1>

<p>Use these properties to redirect system-generated messages to the agent log file: </p>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>agent.logLevel.SystemErr</b><br />
<p><b>Description</b></p>

<p>Redirects System.err to agent.log.   Commenting out this setting will cause System.err to be directed to agent.log.startup.</p>

<p><b>Default</b></p>

<p>ERROR</p></td></tr></table></div> 



<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>agent.logLevel.SystemOut</b><br />
<p><b>Description</b></p>

<p>Redirects System.out to agent.log.   Commenting out this setting will cause System.out to be directed to agent.log.startup.</p>

<p><b>Default</b></p>

<p>INFO</p></td></tr></table></div>

<h1><a name="ConfigureAgentLogging-ConfigureDebugLogLevelforanAgentSubsystem"></a>Configure Debug Log Level for an Agent Subsystem </h1>

<p>For troubleshooting purposes you can increase logging level for an individual agent subsystem. To do so, uncomment the appropriate line in the section of <tt>agent.properties</tt> labelled "Agent Subsystems: Uncomment individual subsystems to see debug messages", shown in the excerpt below.</p>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>The log4j properties in <tt>agent.properties</tt> are excerpted below. 
<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Agent log4j Properties</b><br /></td></tr></table></div> 
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<script type="syntaxhighlighter" class="theme: Confluence; brush: java; gutter: false"><![CDATA[log4j.rootLogger=${agent.logLevel}, R

log4j.appender.R.File=${agent.logFile}
log4j.appender.R.MaxBackupIndex=1
log4j.appender.R.MaxFileSize=5000KB
log4j.appender.R.layout.ConversionPattern=%d{dd-MM-yyyy HH:mm:ss,SSS z} %-5p [%t] [%c{1}@%L] %m%n
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R=org.apache.log4j.RollingFileAppender

##
## Disable overly verbose logging 
##
log4j.logger.org.apache.http=ERROR
log4j.logger.org.springframework.web.client.RestTemplate=ERROR
log4j.logger.org.hyperic.hq.measurement.agent.server.SenderThread=INFO
log4j.logger.org.hyperic.hq.agent.server.AgentDListProvider=INFO
log4j.logger.org.hyperic.hq.agent.server.MeasurementSchedule=INFO
log4j.logger.org.hyperic.util.units=INFO
log4j.logger.org.hyperic.hq.product.pluginxml=INFO

# Only log errors from naming context
log4j.category.org.jnp.interfaces.NamingContext=ERROR
log4j.category.org.apache.axis=ERROR

#Agent Subsystems: Uncomment individual subsystems to see debug messages.
#-----------------------------------------------------------------------
#log4j.logger.org.hyperic.hq.autoinventory=DEBUG
#log4j.logger.org.hyperic.hq.livedata=DEBUG
#log4j.logger.org.hyperic.hq.measurement=DEBUG
#log4j.logger.org.hyperic.hq.control=DEBUG

#Agent Plugin Implementations 
#log4j.logger.org.hyperic.hq.product=DEBUG

#Server Communication 
#log4j.logger.org.hyperic.hq.bizapp.client.AgentCallbackClient=DEBUG

#Server Realtime commands dispatcher 
#log4j.logger.org.hyperic.hq.agent.server.CommandDispatcher=DEBUG 

#Agent Configuration parser
#log4j.logger.org.hyperic.hq.agent.AgentConfig=DEBUG

#Agent plugins loader 
#log4j.logger.org.hyperic.util.PluginLoader=DEBUG 

#Agent Metrics Scheduler (Scheduling tasks definitions &amp; executions) 
#log4j.logger.org.hyperic.hq.agent.server.session.AgentSynchronizer.SchedulerThread=DEBUG 

#Agent Plugin Managers 
#log4j.logger.org.hyperic.hq.product.MeasurementPluginManager=DEBUG
#log4j.logger.org.hyperic.hq.product.AutoinventoryPluginManager=DEBUG
#log4j.logger.org.hyperic.hq.product.ConfigTrackPluginManager=DEBUG
#log4j.logger.org.hyperic.hq.product.LogTrackPluginManager=DEBUG
#log4j.logger.org.hyperic.hq.product.LiveDataPluginManager=DEBUG
#log4j.logger.org.hyperic.hq.product.ControlPluginManager=DEBUG]]></script>
</div></div></td></tr></table></div> 




				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Feb 07, 2012 15:56</font></td>
		    </tr>
	    </table>
    </body>
</html>
