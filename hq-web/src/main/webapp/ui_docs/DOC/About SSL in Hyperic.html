<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 5.7 : About SSL in Hyperic</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 5.7.html" title="vFabric Hyperic 5.7 Documentation Home">vFabric Hyperic 5.7 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 5.7 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-5.0.html">Hyperic 5.7 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 5.7 : About SSL in Hyperic
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 09, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <style type='text/css'>/*<![CDATA[*/
div.rbtoc1349810416024 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1349810416024 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1349810416024 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1349810416024'>
<ul>
    <li><a href='#AboutSSLinHyperic-HypericSSLSupport'>Hyperic SSL Support</a></li>
    <li><a href='#AboutSSLinHyperic-OverviewofHypericSSLConfigurationandDefaults'>Overview of Hyperic SSL Configuration and Defaults</a></li>
<ul>
    <li><a href='#AboutSSLinHyperic-AboutHypericServerandSSL'>About Hyperic Server and SSL</a></li>
    <li><a href='#AboutSSLinHyperic-AboutHypericAgentandSSL'>About Hyperic Agent and SSL</a></li>
</ul>
    <li><a href='#AboutSSLinHyperic-HypericCertificateProcessing'>Hyperic Certificate Processing</a></li>
    <li><a href='#AboutSSLinHyperic-SSLBetweena5.0ServerandPre4.6Agents'>SSL Between a 5.0 Server and Pre-4.6 Agents</a></li>
    <li><a href='#AboutSSLinHyperic-SSLandHypericProductPlugins'>SSL and Hyperic Product Plugins</a></li>
</ul></div>

<blockquote><p><b>About this page...</b></p>

<p>This page has information about SSL communications in Hyperic. Read this page to understand Hyperic's default behaviors and SSL configuration options and tasks.  For instructions on configuring SSL communications and certificates, see:</p>

<ul>
	<li>For new Hyperic installations &#8212; <a href="Hyperic Installation and Startup Process.html" title="Hyperic Installation and Startup Process">Hyperic Installation and Startup Process</a></li>
	<li>For upgrade installations &#8212; <a href="Hyperic Upgrade Processes.html" title="Hyperic Upgrade Processes">Hyperic Upgrade Processes</a></li>
	<li>To change existing SSL configuration &#8212; <a href="Configure SSL Options.html" title="Configure SSL Options">Configure SSL Options</a></li>
</ul>
</blockquote>

<h1><a name="AboutSSLinHyperic-HypericSSLSupport"></a>Hyperic SSL Support</h1>

<p>Hyperic (version 4.6 and later) supports the use of SSL communication for both server-to-agent and agent-to-server communications. Server-to-agent communication is <em>always</em> SSL; you cannot configure Hyperic to use plain HTTP for server-to-agent communication. You configure SSL for agent-to-server communication when you configure agent-server communications, either interactively at first agent startup, or in <tt>AgentHome/conf/agent.properties</tt> using the <tt>agent.setup.camSecure</tt> property.</p>

<p>The Hyperic Agent can manage products over SSL, if the product plugin supports it.</p>

<h1><a name="AboutSSLinHyperic-OverviewofHypericSSLConfigurationandDefaults"></a>Overview of Hyperic SSL Configuration and Defaults</h1>

<p>When the Hyperic Server and a Hyperic Agent communicate over SSL, each component validates the other's SSL certificate.</p>

<p>Ideally, you should configure Hyperic components to communicate with each other via SSL at installation time. Detailed instructions are provided in <a href="Hyperic Installation and Startup Process.html" title="Hyperic Installation and Startup Process">Hyperic Installation and Startup Process</a>. </p>

<h2><a name="AboutSSLinHyperic-AboutHypericServerandSSL"></a>About Hyperic Server and SSL</h2>

<p>If you are using the standard Hyperic installer <tt>setup.sh</tt> or <tt>setup.bat</tt>, install the Hyperic Server's keystore <em>before</em> installing the server. When you run the installer in <tt>&#45;full</tt> mode, it offers you the option of configuring the location and password of an existing keystore on the Hyperic Server host. Choose the "user-managed keystore" option and supply the keystore path and password during the server installation dialog.</p>

<p>If you do <em>not</em> configure the server to use an existing keystore, and supply its location and password during server installation, the Hyperic installer will create a keystore for the server with a self-signed certificate. The keystore, named <tt>hyperic.keystore</tt>, will be in <tt>ServerHome/conf</tt>, and have the password "hyperic". The server will present the self-signed certificate when communicating with agents.</p>

<p>Note that if you are deploying the Hyperic Server vApp, the deployment dialog does not allow you to configure the Hyperic Server for a user-managed keystore. If you deploy the server vApp and want to configure it for a user-managed keystore, see <a href="Configure SSL Options.html#ConfigureSSLOptions-certs">Reconfigure Hyperic for Trusted SSL Certificates</a> on <a href="Configure SSL Options.html" title="Configure SSL Options">Configure SSL Options</a>.</p>


<h2><a name="AboutSSLinHyperic-AboutHypericAgentandSSL"></a>About Hyperic Agent and SSL</h2>

<p>If you want to use SSL for agent-to-server communication, install the Hyperic Agent's keystore <em>prior</em> to first startup. You <em>must</em> configure the keystore path and password (and also its alias, if you configure unidirectional agent-server communication) in the <tt>AgentHome/conf/agent.properties</tt> file before starting the agent the first time. The agent properties related to SSL are:</p>
<ul>
	<li><tt><a href="agent.keystore.alias.html" title="agent.keystore.alias">agent.keystore.alias</a></tt></li>
	<li><tt><a href="agent.keystore.password.html" title="agent.keystore.password">agent.keystore.password</a></tt></li>
	<li><tt><a href="agent.keystore.path.html" title="agent.keystore.path">agent.keystore.path</a></tt></li>
	<li><tt><a href="agent.setup.camSecure.html" title="agent.setup.camSecure">agent.setup.camSecure</a></tt></li>
</ul>


<p>If you do <em>not</em> configure the keystore information in <tt>agent.properties</tt> before first startup, the agent will create a keystore with a self-signed certificate.  If you choose to run with Hyperic-generated keystores, update the password for each Hyperic-generated keystore; edit <tt><a href="agent.keystore.password.html" title="agent.keystore.password">agent.keystore.password</a></tt> in the <tt>agent.properties</tt> file, and restart the agent.</p>

<p>In Hyperic 4.6 and later Hyperic plugins that connect to managed products over SSL are updated to support certificate verification. To enable management of such products by a 4.6.x agent, it may be necessary to manually import the target server's certificate into the agent keystore if the server's certificate is not trusted.  For more information see <a href="Configure SSL Options.html#ConfigureSSLOptions-SslPlugins">Managed Products and SSL</a>.</p>


<p><a name="AboutSSLinHyperic-certs"></a></p>

<h1><a name="AboutSSLinHyperic-HypericCertificateProcessing"></a>Hyperic Certificate Processing</h1>

<p>The first time a Hyperic Agent initiates a connection to the Hyperic Server (the first time you start the agent after installation), the server presents its SSL certificate to the agent. If the agent trusts the certificate that the server presented, the agent imports the server's certificate into its own keystore.</p>

<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>How the Agent Decides to Trust the Server's Certificate</b><br />The agent trusts a server certificate:
<ul>
	<li>if that certificate already exists in the agent's keystore, or</li>
	<li>if the certificate has the same CA as the agent's certificate.</li>
</ul>
</td></tr></table></div>
<p>By default, if the agent does not trust the certificate presented by the server, the agent issues a warning &#8212; you can terminate the configuration process, do the SSL setup. If you wish, you can continue the config process, in which case the agent will import the untrusted certificate presented by the Hyperic Server.</p>

<p>By default, the Hyperic Server and the Hyperic Agent do not import untrusted certificates unless you explicitly respond "yes" to the warning prompt described above. Note, however that both components can be configured to accept untrusted certificates automatically, with no warning. For security reasons, this practice is strongly discouraged. Check the values of <tt>agent.setup.acceptUnverifiedCertificate</tt> (in <tt>AgentHome/conf/agent.properties</tt>) and <tt>accept.unverified.certificates</tt> in <tt>ServerHome/conf/hq-server.conf</tt>.</p>

<p><a name="AboutSSLinHyperic-compatibility"></a></p>

<h1><a name="AboutSSLinHyperic-SSLBetweena5.0ServerandPre4.6Agents"></a>SSL Between a 5.0 Server and Pre-4.6 Agents</h1>

<p>To ensure backwards compatibility with pre-4.6 Hyperic Agents, the Hyperic Server upgrade procedure does <em>not</em> provide a mechanism for configuring the server to access a user-managed keystore.</p>

<p>When a newly-upgraded Hyperic 4.6.x Server starts up, it generates a self-signed SSL certificate.</p>

<p>When a pre-4.6 Hyperic Agent first connects to a newly-upgraded Hyperic 4.6.x server, its self-signed certificate is imported into the server's keystore.</p>

<p><a name="AboutSSLinHyperic-SslPlugins"></a></p>

<h1><a name="AboutSSLinHyperic-SSLandHypericProductPlugins"></a>SSL and Hyperic Product Plugins</h1>

<p>Hyperic plugins that connect to managed products over SSL are updated to support certificate verification. To enable management of such products, it may be necessary to  manually import the target server's certificate into the agent keystore if the server's certificate is not trusted. Affected plugins include:</p>

<ul>
	<li><a href="vSphere.html" title="vSphere">vSphere</a></li>
	<li><a href="RabbitMQ.html" title="RabbitMQ">RabbitMQ</a></li>
</ul>


<p>Import of the managed server's certificate is necessary only if the Hyperic Agent cannot verify the certificate. If the agent's keystore contains a CA cert and the managed server's certificate has been signed by that CA, the agent will be able verify the certificate. Otherwise, you should import the certificate of the signing CA, which is preferable to simply importing the managed server's certificate. If you are not sure of all of the CAs for signed certificates, you might consider importing the certificates in your JRE cacert file, which contains certificates for a variety of common CAs.</p>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Oct 29, 2012 12:59</font></td>
		    </tr>
	    </table>
    </body>
</html>
