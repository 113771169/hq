<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 5.7 : Upgrade a Hyperic 5.7 Installation</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
<b><a href="vFabric Hyperic 5.7.html" title="vFabric Hyperic 5.7 Documentation Home">vFabric Hyperic 5.7 Documentation Home (Internal)</a>
 - <a href="https://www.vmware.com/support/pubs/vfabric-hyperic.html">vFabric Hyperic 5.7 Documentation Home (Online)</a>
 -  <a href="https://www.vmware.com/support/vfabric-hyperic/doc/vfabric-hyperic-rn-5.7.html">Hyperic 5.7 Release Notes</a> </b>
 <p>
 <p>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 5.7 : Upgrade a Hyperic 5.7 Installation
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 02, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <p><font color="gray"><em>Topics marked with</em></font> <font color="red">*</font> <font color="gray"><em>relate to features available only in vFabric Hyperic.</em></font></p>


<style type='text/css'>/*<![CDATA[*/
div.rbtoc1349201163955 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1349201163955 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1349201163955 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1349201163955'>
<ul>
    <li><a href='#UpgradeaHyperic5.0Installation-WhatHappensDuringServerUpgrade'>What Happens During Server Upgrade</a></li>
    <li><a href='#UpgradeaHyperic5.0Installation-UpgradeHypericServeronUnixBasedPlatforms'>Upgrade Hyperic Server on Unix-Based Platforms</a></li>
    <li><a href='#UpgradeaHyperic5.0Installation-UpgradeHypericServeronWindowsPlatforms'>Upgrade Hyperic Server on Windows Platforms</a></li>
    <li><a href='#UpgradeaHyperic5.0Installation-UpgradeHypericAgents'>Upgrade Hyperic Agents</a></li>
</ul></div>

<blockquote><p><b>About this page...</b></p>

<p>This page has instructions for upgrading a version 5.x Hyperic Server to a new version.</p>
</blockquote>
<h1><a name="UpgradeaHyperic5.0Installation-WhatHappensDuringServerUpgrade"></a>What Happens During Server Upgrade</h1>

<p>You upgrade the Hyperic Server using the Hyperic installer, using the upgrade option. (The installer does not upgrade the Hyperic Agent.)</p>

<p>The installer installs a new version of Hyperic Server; it obtains the configuration information from your previous server installation configuration files and configures the new server instance accordingly.</p>

<p>If you use Hyperic's internal database, the installer creates a new database instance that contains the data from the existing instance. The new instance has an updated schema, but the PostgreSQL server itself in not upgraded to a new version.</p>

<p>If you use an external database, the installer updates the existing instance.</p>

<h1><a name="UpgradeaHyperic5.0Installation-UpgradeHypericServeronUnixBasedPlatforms"></a>Upgrade Hyperic Server on Unix-Based Platforms</h1>

<ol>
	<li>Stop the current server instance. For example:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">/opt/hyperic/server-5.0.0/bin/hq-server.sh stop</pre>
		</div>
</div></div></li>
	<li><b>If you use an external Hyperic database, back it up before proceeding.</b></li>
	<li>Archive your old Hyperic Server directory, so that if you want, you can revert to the previous version. For example:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">tar -zcvf hq-server-5.0.0-archive.tgz hq-server-5.0.0-EE</pre>
		</div>
</div></div></li>
	<li>Run the Hyperic installer in upgrade mode. For example:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">/opt/hyperic/hyperic-hq-installer/setup.sh -upgrade</pre>
		</div>
</div></div></li>
	<li>You are prompted to acknowledge the VMware license agreement.</li>
	<li>The installer prompts for the path to the previous Hyperic Server instance. Enter the path, for example:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">/opt/hyperic/server-5.0.0</pre>
		</div>
</div></div></li>
	<li>The installer prompts for the path to the new server instance. Enter the path to the directory under which the new server instance will be installed. For example, to install the new instance under your existing Hyperic home directory:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">/opt/hyperic</pre>
		</div>
</div></div>
	<ul>
		<li>The installer will finish the upgrade.</li>
	</ul>
	</li>
	<li>Start the new server instance. For example:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">/opt/hyperic/server-5.1.0/bin/hq-server.sh start</pre>
		</div>
</div></div></li>
</ol>


<h1><a name="UpgradeaHyperic5.0Installation-UpgradeHypericServeronWindowsPlatforms"></a>Upgrade Hyperic Server on Windows Platforms</h1>

<ol>
	<li>Stop the existing server instance using the Windows Services Control Panel.</li>
	<li>Follow the instructions that apply, depending on whether you use the Hyperic built-in database or an external database:
	<ul>
		<li>If you use the built-in Hyperic database, the upgrade process will migrate your database schema to the latest edition. Note that PostgreSQL itself is not upgraded to the latest version that ships with Hyperic. The database server remains the one installed when you first installed Hyperic Server.</li>
		<li><b>If using an external database, back it up.</b></li>
	</ul>
	</li>
	<li>Archive your previous Hyperic Server directory so that if you wish you can revert to the previous version.</li>
	<li>Run the Hyperic installer in upgrade mode:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">c:\hyperic\hyperic-hq-installer\setup.bat -upgrade</pre>
		</div>
</div></div></li>
	<li>You are prompted to acknowledge the VMware license agreement.</li>
	<li>The installer prompts for the path to the previous Hyperic Server instance. Enter the full path to your existing server installation, for instance:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">c:\hyperic\server-5.0.0</pre>
		</div>
</div></div></li>
	<li>The installer prompts for the path where the upgrade version should be installed. Enter the path to the directory that will contain the new server installation. For instance, to install the new instance under your existing Hyperic home directory:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">c:\hyperic\</pre>
		</div>
</div></div>
	<ul>
		<li>The installer will finish the upgrade.</li>
	</ul>
	</li>
	<li>Update the Windows Service with the new version information:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">c:\hyperic\server-5.1.0\bin\hq-server.bat install</pre>
		</div>
</div></div></li>
	<li>Start the upgraded Hyperic Server using the Windows Services Control Panel.</li>
</ol>


<h1><a name="UpgradeaHyperic5.0Installation-UpgradeHypericAgents"></a>Upgrade Hyperic Agents</h1>

<p>See the instructions in <a href="Upgrade Hyperic Agent.html" title="Upgrade Hyperic Agent">Upgrade Hyperic Agent</a>.</p>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Oct 29, 2012 13:00</font></td>
		    </tr>
	    </table>
    </body>
</html>
