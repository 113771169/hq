<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>vFabric Hyperic 4.6.5 : Start, Stop, and Other Agent Operations</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            vFabric Hyperic 4.6.5 : Start, Stop, and Other Agent Operations
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 04, 2012 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <p><font color="gray"><em>Topics marked with</em></font> <font color="red">*</font> <font color="gray"><em>relate to features available only in vFabric Hyperic.</em></font></p>

 
<style type='text/css'>/*<![CDATA[*/
div.rbtoc1325699545459 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1325699545459 ul {list-style: disc;margin-left: 0px;padding-left: 20px;}
div.rbtoc1325699545459 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1325699545459'>
<ul>
    <li><a href='#Start%2CStop%2CandOtherAgentOperations-RuntheAgentLauncherfromtheCommandLine'>Run the Agent Launcher from the Command Line</a></li>
<ul>
    <li><a href='#Start%2CStop%2CandOtherAgentOperations-Runninghqagent.sh'>Running hq-agent.sh</a></li>
    <li><a href='#Start%2CStop%2CandOtherAgentOperations-Runninghqagent.bat'>Running hq-agent.bat</a></li>
</ul>
    <li><a href='#Start%2CStop%2CandOtherAgentOperations-RuntheAgentLauncherfromtheHypericUserInterface'>Run the Agent Launcher from the Hyperic User Interface</a></li>
<ul>
    <li><a href='#Start%2CStop%2CandOtherAgentOperations-RestartanAgentfromtheHypericUserInterface'>Restart an Agent from the Hyperic User Interface</a></li>
    <li><a href='#Start%2CStop%2CandOtherAgentOperations-PinganAgentfromtheHypericUserInterface'>Ping an Agent from the Hyperic User Interface</a></li>
    <li><a href='#Start%2CStop%2CandOtherAgentOperations-UpgradeanAgentfromtheHypericUserInterface'>Upgrade an Agent from the Hyperic User Interface</a></li>
    <li><a href='#Start%2CStop%2CandOtherAgentOperations-PushaResourcePlugintotheAgentfromtheHypericUserInterface'>Push a Resource Plugin to the Agent from the Hyperic User Interface</a></li>
</ul>
    <li><a href='#Start%2CStop%2CandOtherAgentOperations-RuntheAgentWithouttheJavaServiceWrapper'>Run the Agent Without the Java Service Wrapper</a></li>
</ul></div> 
 



<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Starting an Agent for the First Time</b><br />The first time you start a Hyperic Agent, you must supply setup information (unless it is available in <tt>agent.properties</tt>). For information about starting an agent for the first time, and installing the agent as a service in Windows environments, see <a href="Configure Agent - Server Communication Interactively.html" title="Configure Agent - Server Communication Interactively">Configure Agent &#45; Server Communication Interactively</a>.</td></tr></table></div>
<h1><a name="Start%2CStop%2CandOtherAgentOperations-RuntheAgentLauncherfromtheCommandLine"></a>Run the Agent Launcher from the Command Line </h1>

<p>You initiate the agent launcher and agent lifecycle commands with the <tt>hq-agent.sh</tt>, or <tt>hq-agent.bat</tt> script, in the <tt>AgentHome/bin</tt> directory. </p>

<h2><a name="Start%2CStop%2CandOtherAgentOperations-Runninghqagent.sh"></a>Running hq-agent.sh </h2>

<ol>
	<li>Open a command shell or terminal window.</li>
	<li>Enter a command of this form:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">sh hq-agent.sh command</pre>
		</div>
</div></div> </li>
</ol>


<p>Where command is one of the following: </p>
<ul>
	<li>start &#8212; Starts the agent as a daemon process.</li>
	<li>stop &#8212; Stops the agent's JVM process.</li>
	<li>restart &#8212; Stops and then starts the agent's JVM process</li>
	<li>status &#8212; Queries the status of the agent's JVM process.</li>
	<li>dump &#8212; Runs a thread dump for the agent process, and writes the results to the <tt>agent.log</tt> file in <tt>AgentHome/log</tt>.</li>
	<li>ping &#8212; Pings the agent process.</li>
	<li>setup &#8212; Causes the Hyperic Agent to prompts you for the agent-server connection properties, allowing you to change the values that were provided at first agent startup.</li>
</ul>


<h2><a name="Start%2CStop%2CandOtherAgentOperations-Runninghqagent.bat"></a>Running hq-agent.bat </h2>

<ol>
	<li>Open a terminal window.</li>
	<li>Enter a command of this form:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">hq-agent.bat command</pre>
		</div>
</div></div> </li>
</ol>


<p>Where command is one of the following: </p>
<ul>
	<li>start - starts the agent as an NT service</li>
	<li>stop - stops the agent as an NT service</li>
	<li>restart - stops and then starts the agent's JVM process</li>
	<li>install - installs the agent NT service</li>
	<li>remove - removes the agent's service from the NT service table</li>
	<li>query - queries the current status of the agent NT service &nbsp;(status</li>
	<li>ping - pings the agent process for availability</li>
	<li>setup - prompts for setup configuration for the agent process</li>
</ul>


<h1><a name="Start%2CStop%2CandOtherAgentOperations-RuntheAgentLauncherfromtheHypericUserInterface"></a>Run the Agent Launcher from the Hyperic User Interface</h1>

<p>In vFabric Hyperic, you can issue selected commands to an running Hyperic Agent. </p>

<p><b>Available only in <font color="red">vFabric Hyperic</font></b></p>

<p>Agent control commands are available on the <b>Views</b> tab for an Hyperic Agent or a group of agents in inventory.</p>

<ul>
	<li><a href="#Start%2CStop%2CandOtherAgentOperations-RestartanAgentfromtheHypericUserInterface">Restart an Agent from the Hyperic User Interface</a></li>
	<li><a href="#Start%2CStop%2CandOtherAgentOperations-PinganAgentfromtheHypericUserInterface">Ping an Agent from the Hyperic User Interface</a></li>
	<li><a href="#Start%2CStop%2CandOtherAgentOperations-UpgradeanAgentfromtheHypericUserInterface">Upgrade an Agent from the Hyperic User Interface</a></li>
	<li><a href="#Start%2CStop%2CandOtherAgentOperations-PushaResourcePlugintotheAgentfromtheHypericUserInterface">Push a Resource Plugin to the Agent from the Hyperic User Interface</a></li>
</ul>



<h2><a name="Start%2CStop%2CandOtherAgentOperations-RestartanAgentfromtheHypericUserInterface"></a>Restart an Agent from the Hyperic User Interface</h2>

<p><a name="Start%2CStop%2CandOtherAgentOperations-restart"></a><br/>
The <b>restart</b> command invokes the agent's Java Service Wrapper's restart command. The restart command shuts down the JVM process in which the agent runs, waits for the process to terminate cleanly, and spawns a new JVM process for the agent. During the restart process, the agent's metric collection and resource control functionality will be interrupted.</p>

<p>The restart command happens asynchronously. To verify that the restart succeeded you can go to the page for the agent in the Hyperic user interface and check its availability. Alternatively, you could configure an alert for the agent that fires when the agent's availability changes.&nbsp;</p>

<p>To restart an agent:&nbsp;</p>
<ol>
	<li>Navigate to the <b>Views</b> tab for an Hyperic Agent or a group of agents.</li>
	<li>Select <b>restart</b> from the pull-down list</li>
	<li>Click <b>Execute</b>.</li>
</ol>


<h2><a name="Start%2CStop%2CandOtherAgentOperations-PinganAgentfromtheHypericUserInterface"></a>Ping an Agent from the Hyperic User Interface</h2>
<p><a name="Start%2CStop%2CandOtherAgentOperations-ping"></a></p>

<ol>
	<li>Navigate to the <b>Views</b> tab for an Hyperic Agent or a group of agents.</li>
	<li>Select <b>ping</b> from the pull-down.</li>
	<li>Click <b>Execute</b>.</li>
</ol>


<h2><a name="Start%2CStop%2CandOtherAgentOperations-UpgradeanAgentfromtheHypericUserInterface"></a>Upgrade an Agent from the Hyperic User Interface</h2>
<p><a name="Start%2CStop%2CandOtherAgentOperations-upgrade"></a></p>

<ol>
	<li>Navigate to the <b>Views</b> tab for an Hyperic Agent or a group of agents.</li>
	<li>Select the <b>upgrade</b> command from the pull-down.</li>
	<li>On the pull-down list of agent bundles that appears, select the desired bundle</li>
	<li>Click <b>Execute</b>.
	<ul>
		<li>The selected agent bundle is transferred from the Hyperic Server to the target agent(s).</li>
		<li>The agent expands the bundle locally.</li>
		<li>The agent updates the local bundle property.</li>
		<li>The server restarts the agent.</li>
	</ul>
	</li>
</ol>


<p>The configuration settings in the agent's <tt>/conf/agent.properties</tt> file are preserved.</p>

<h2><a name="Start%2CStop%2CandOtherAgentOperations-PushaResourcePlugintotheAgentfromtheHypericUserInterface"></a>Push a Resource Plugin to the Agent from the Hyperic User Interface</h2>
<p><a name="Start%2CStop%2CandOtherAgentOperations-push"></a></p>

<p>This <b>push plugin</b> command sends new and changed resource plugins to the target agent(s). Pushing plugins to an agent results in an agent restart.</p>

<ol>
	<li>Navigate to the <b>Views</b> tab for an Hyperic Agent or a group of agents.</li>
	<li>Select the <b>push plugin</b> command from the pull-down.</li>
	<li>On the pull-down list of plugins that appears, select the desired plugin.</li>
	<li>Click <b>Execute</b>.
	<ul>
		<li>The selected plugin is transferred from the Hyperic Server to the target agent(s)</li>
		<li>The server restarts the agent(s).</li>
	</ul>
	</li>
</ol>
 

<h1><a name="Start%2CStop%2CandOtherAgentOperations-RuntheAgentWithouttheJavaServiceWrapper"></a>Run the Agent Without the Java Service Wrapper </h1>

<p>If you run an Hyperic Agent on a system that does not support the Java Service Wrapper, or for other reasons prefer not to use the wrapper, you can start the agent without the wrapper. </p>

<p>The <tt>hq-agent-nowrapper.sh</tt> agent start script in <tt>AgentHome/bundles/agent-x.y.z/bin</tt> </p>

<p>Because <tt>hq-agent-nowrapper.sh</tt> does not fork itself into the background, run it using <tt>nohup</tt>: </p>

<p><tt>nohup AgentHome/bundles/agent-x.y.z/bin/hq-agent-nowrapper.sh &amp;</tt></p>



				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jan 20, 2012 10:07</font></td>
		    </tr>
	    </table>
    </body>
</html>
