<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE server>

<!-- plugin deployer -->

<server>
  <mbean code="org.hyperic.hq.product.server.mbean.ProductPluginDeployer"
	 name="hyperic.jmx:type=Service,name=ProductPluginDeployer">

    <attribute name="PluginDir">hq-plugins</attribute>
  </mbean>

  <mbean code="org.jboss.deployment.scanner.URLDeploymentScanner"
	 name="hyperic.jmx:type=DeploymentScanner,flavor=URL">

    <depends optional-attribute-name="Deployer">jboss.system:service=MainDeployer</depends>
    <depends>hyperic.jmx:type=Service,name=ProductPluginDeployer</depends>

    <attribute name="URLComparator">org.jboss.deployment.scanner.PrefixDeploymentSorter</attribute>

    <attribute name="Filter">org.jboss.deployment.scanner.DeploymentFilter</attribute>

    <attribute name="ScanPeriod">5000</attribute>

    <attribute name="URLs">
       ./deploy/@@@HYPERIC_EAR@@@/hq-plugins/
    </attribute>
  </mbean>
</server>
