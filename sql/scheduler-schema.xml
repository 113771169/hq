<?xml version="1.0" encoding="UTF-8"?>
<Covalent.DBSetup name="scheduler-schema.xml"
                  notice="DBSetup, Copyright (C) 2002, Covalent Technologies, Inc., All Rights Reserved.">

  <table name="EAM_QRTZ_JOB_DETAILS">
    <column name="JOB_NAME" required="true" type="VARCHAR2" size="80"/>
    <column name="JOB_GROUP" required="true" type="VARCHAR2" size="80"/>
    <column name="DESCRIPTION" type="VARCHAR2" size="120"/>
    <column name="JOB_CLASS_NAME" required="true" type="VARCHAR2" size="128"/>
    <column name="IS_DURABLE" required="true" type="BOOLEAN" default="FALSE"/>
    <!-- Quartz 1.5.1 addition -->
    <column name="IS_VOLATILE" required="true" type="BOOLEAN"/> 
    <column name="IS_STATEFUL" required="true" type="BOOLEAN" default="FALSE"/>
    <column name="REQUESTS_RECOVERY" required="true" type="BOOLEAN"
            default="FALSE"/>
    <column name="JOB_DATA" required="false" type="BLOB"/>

    <constraint name="EAM_PK_QRTZ_JOB_DETAILS">
      <primaryKey>
        <field ref="JOB_NAME"/>
        <field ref="JOB_GROUP"/>
      </primaryKey>
    </constraint>
  </table>

  <table name="EAM_QRTZ_JOB_LISTENERS">
    <column name="JOB_NAME" required="true" type="VARCHAR2" size="80"/>
    <column name="JOB_GROUP" required="true" type="VARCHAR2" size="80"/>
    <column name="JOB_LISTENER" required="true" type="VARCHAR2"
            size="80"/>

    <constraint name="EAM_PK_QRTZ_JOB_LISTENERS">
      <primaryKey>
        <field ref="JOB_NAME"/>
        <field ref="JOB_GROUP"/>
        <field ref="JOB_LISTENER"/>
      </primaryKey>
    </constraint>
    <constraint name="EAM_FK_QJL_QJD">
      <foreignKey local="JOB_NAME,JOB_GROUP"
                  references="EAM_QRTZ_JOB_DETAILS(JOB_NAME,JOB_GROUP)"
                  ondelete="cascade"/>
    </constraint>
  </table>

  <table name="EAM_QRTZ_TRIGGERS">
    <column name="TRIGGER_NAME" type="VARCHAR2" size="80"
            required="true"/>
    <column name="TRIGGER_GROUP" type="VARCHAR2" size="80"
            required="true"/>
    <column name="JOB_NAME" type="VARCHAR2" size="80"
            required="true"/>
    <column name="JOB_GROUP" type="VARCHAR2" size="80"
            required="true"/>
    <!-- Quartz 1.5.1 addition -->
    <column name="IS_VOLATILE" required="true" type="BOOLEAN"/> 
    <column name="DESCRIPTION" type="VARCHAR2" size="120"/>
    <column name="NEXT_FIRE_TIME" type="LONG" required="false"/>
    <!-- Quartz 1.5.1 addition -->
    <column name="PREV_FIRE_TIME" type="LONG" required="false"/>
    <column name="TRIGGER_STATE" type="VARCHAR" size="16"
            required="true"/>
    <column name="TRIGGER_TYPE" type="VARCHAR" size="8" required="true"/>
    <column name="START_TIME" type="LONG" required="true"/>
    <column name="END_TIME" type="LONG" required="false"/>
    <column name="CALENDAR_NAME" type="VARCHAR2" size="80"
            required="false"/>
    <column name="MISFIRE_INSTR" type="INTEGER" required="false"/>
    <!-- Quartz 1.5.1 addition -->
    <column name="JOB_DATA" required="false" type="BLOB"/> 

    <constraint name="EAM_PK_QRTZ_TRIGGERS">
      <primaryKey>
        <field ref="TRIGGER_NAME"/>
        <field ref="TRIGGER_GROUP"/>
      </primaryKey>
    </constraint>
    <constraint name="EAM_FK_QT_QJD">
      <foreignKey local="JOB_NAME,JOB_GROUP"
                  references="EAM_QRTZ_JOB_DETAILS(JOB_NAME,JOB_GROUP)"
                  ondelete="cascade"/>
    </constraint>
  </table>

  <table name="EAM_QRTZ_SIMPLE_TRIGGERS">
    <column name="TRIGGER_NAME" type="VARCHAR2" size="80"
            required="true"/>
    <column name="TRIGGER_GROUP" type="VARCHAR2" size="80"
            required="true"/>
    <column name="REPEAT_COUNT" type="LONG" required="true"/>
    <column name="REPEAT_INTERVAL" type="LONG" required="true"/>
    <column name="TIMES_TRIGGERED" type="LONG" required="true"/>

    <constraint name="EAM_PK_QRTZ_SIMPLE_TRIGGERS">
      <primaryKey>
        <field ref="TRIGGER_NAME"/>
        <field ref="TRIGGER_GROUP"/>
      </primaryKey>
    </constraint>
    <constraint name="EAM_FK_QST_QT">
      <foreignKey local="TRIGGER_NAME,TRIGGER_GROUP"
                  references="EAM_QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)"
                  ondelete="cascade"/>
    </constraint>
  </table>

  <table name="EAM_QRTZ_CRON_TRIGGERS">
    <column name="TRIGGER_NAME" type="VARCHAR2" size="80"
            required="true"/>
    <column name="TRIGGER_GROUP" type="VARCHAR2" size="80"
            required="true"/>
    <column name="CRON_EXPRESSION" type="VARCHAR2" size="80"
            required="true"/>
    <column name="TIME_ZONE_ID" type="VARCHAR2" size="80"/>

    <constraint name="EAM_PK_QRTZ_CRON_TRIGGERS">
      <primaryKey>
        <field ref="TRIGGER_NAME"/>
        <field ref="TRIGGER_GROUP"/>
      </primaryKey>
    </constraint>
    <constraint name="EAM_FK_QCT_QT">
      <foreignKey local="TRIGGER_NAME,TRIGGER_GROUP"
                  references="EAM_QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)"
                  ondelete="cascade"/>
    </constraint>
  </table>

  <table name="EAM_QRTZ_BLOB_TRIGGERS">
    <column name="TRIGGER_NAME" type="VARCHAR2" size="80"
            required="true"/>
    <column name="TRIGGER_GROUP" type="VARCHAR2" size="80"
            required="true"/>
    <!-- Quartz 1.5.1 now allows this to be null -->
    <column name="BLOB_DATA" type="BLOB" required="false"/>

    <constraint name="EAM_PK_QRTZ_BLOB_TRIGGERS">
      <primaryKey>
        <field ref="TRIGGER_NAME"/>
        <field ref="TRIGGER_GROUP"/>
      </primaryKey>
    </constraint>
    <constraint name="EAM_FK_QBT_QT">
      <foreignKey local="TRIGGER_NAME,TRIGGER_GROUP"
                  references="EAM_QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)"
                  ondelete="cascade"/>
    </constraint>
  </table>
  
  <table name="EAM_QRTZ_TRIGGER_LISTENERS">
    <column name="TRIGGER_NAME" type="VARCHAR2" size="80"
            required="true"/>
    <column name="TRIGGER_GROUP" type="VARCHAR2" size="80"
            required="true"/>
    <column name="TRIGGER_LISTENER" type="VARCHAR2" size="80"
            required="true"/>

    <constraint name="EAM_PK_QRTZ_TRIGGER_LISTENERS">
      <primaryKey>
        <field ref="TRIGGER_NAME"/>
        <field ref="TRIGGER_GROUP"/>
        <field ref="TRIGGER_LISTENER"/>
      </primaryKey>
    </constraint>
    <constraint name="EAM_FK_QTL_QT">
      <foreignKey local="TRIGGER_NAME,TRIGGER_GROUP"
                  references="EAM_QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)"
                  ondelete="cascade"/>
    </constraint>
  </table>

  <table name="EAM_QRTZ_FIRED_TRIGGERS">
    <column name="ENTRY_ID" primarykey="true" type="VARCHAR2"
            size="95" required="true"/>
    <column name="TRIGGER_NAME" type="VARCHAR2" size="80"
            required="true"/>
    <column name="TRIGGER_GROUP" type="VARCHAR2" size="80"
            required="true"/>
    <column name="INSTANCE_NAME" type="VARCHAR2" size="80"
            required="true"/>
    <column name="FIRED_TIME" type="LONG" required="true"/>
    <!-- Quartz 1.5.1 renamed this -->
    <column name="STATE" type="VARCHAR2" size="16" required="true"/> 
    <!-- Quartz 1.5.1 additional columns below -->
    <column name="IS_VOLATILE" required="true" type="BOOLEAN"/>
    <column name="JOB_NAME" required="false" type="VARCHAR2" size="80"/>
    <column name="JOB_GROUP" required="false" type="VARCHAR2" size="80"/>
    <column name="IS_STATEFUL" required="false" type="BOOLEAN"/>
    <column name="REQUESTS_RECOVERY" required="false" type="BOOLEAN"/>
  </table>

  <table name="EAM_QRTZ_CALENDARS">
    <column name="CALENDAR_NAME" primarykey="true" type="VARCHAR2"
            size="80" required="true"/>
    <column name="CALENDAR" type="BLOB" required="true"/>
  </table>

  <!-- Added during the upgrade from Quartz 1.07 to 1.5.1 -->
  <table name="EAM_QRTZ_PAUSED_TRIGGER_GRPS">
    <column name="TRIGGER_GROUP" primarykey="true" type="VARCHAR2" size="80" required="true"/>
  </table>

  <table name="EAM_QRTZ_SCHEDULER_STATE">
    <column name="INSTANCE_NAME" primarykey="true" type="VARCHAR2" size="80" required="true"/>
    <column name="LAST_CHECKIN_TIME" type="LONG" required="true"/>
    <column name="CHECKIN_INTERVAL" type="LONG" required="true"/>
    <column name="RECOVERER" type="VARCHAR2" size="80" required="false"/>
  </table>

</Covalent.DBSetup>
