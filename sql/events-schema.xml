<?xml version="1.0" encoding="UTF-8"?>
<Covalent.DBSetup name="events-schema.xml" notice="DBSetup, Copyright (C) 2002, Covalent Technologies, Inc., All Rights Reserved.">

   <table name="EAM_ALERT_DEFINITION">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="NAME" required="true" size="100" type="VARCHAR2"/>
        <column name="CTIME" type="LONG" required="true"/>
        <column name="MTIME" type="LONG" required="true"/>
        <column name="PARENT_ID" type="INTEGER" required="false"/>
        <column name="DESCRIPTION" required="false" size="250" type="VARCHAR2"/>
        <column name="PRIORITY" type="INTEGER" default="1" required="true"/>
        <column name="APPDEF_ID" type="INTEGER" required="true"/>
        <column name="APPDEF_TYPE" type="INTEGER" required="true"/>
        <column name="ENABLED" required="true" default="TRUE" type="BOOLEAN"/>
        <column name="FREQUENCY_TYPE" type="INTEGER" required="true"/>
        <column name="COUNT" type="LONG" required="false"/>
        <column name="RANGE" type="LONG" required="false"/>
        <column name="WILL_RECOVER" required="true" default="false"
                type="BOOLEAN"/>
        <column name="NOTIFY_FILTERED" required="true" default="false"
                type="BOOLEAN"/>
        <column name="CONTROL_FILTERED" type="BOOLEAN" required="true"
                default="FALSE"/>
        <column name="ACT_ON_TRIGGER_ID" type="INTEGER" required="false"/>
        <column name="DELETED" required="true" default="FALSE" type="BOOLEAN"/>
    </table>

    <table name="EAM_ACTION">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="CLASSNAME" required="true"  size="200" type="VARCHAR2"/>
        <column name="CONFIG" required="false" type="BYTES"/>
        <column name="ALERT_DEFINITION_ID" required="false" type="INTEGER"
                references="EAM_ALERT_DEFINITION(ID)"/>
        <column name="PARENT_ID" type="INTEGER" required="false"/>
    </table>

    <table name="EAM_REGISTERED_TRIGGER">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="FREQUENCY" required="true" default="0" type="LONG"/>
        <column name="CLASSNAME" required="true"  size="200" type="VARCHAR2"/>
        <column name="CONFIG" required="false" type="BYTES"/>
        <column name="ALERT_DEFINITION_ID" required="false" type="INTEGER"
                references="EAM_ALERT_DEFINITION(ID)"/>
        <index name="ALERT_DEF_TRIGGER_IDX">
            <field ref="ALERT_DEFINITION_ID" />
        </index>
    </table>

    <table name="EAM_ALERT_CONDITION">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="TYPE" required="true" type="INTEGER"/>
        <column name="REQUIRED" required="true"  type="BOOLEAN"/>
        <column name="MEASUREMENT_ID" required="false" type="INTEGER"/>
        <column name="NAME" required="false" size="100" type="VARCHAR2"/>
        <column name="COMPARATOR" required="false" size="2" type="VARCHAR2"/>
        <column name="THRESHOLD" required="false" type="DOUBLE"/>
        <column name="OPTION_STATUS" required="false" size="25" type="VARCHAR2"/>
        <column name="ALERT_DEFINITION_ID" required="false" type="INTEGER"
                references="EAM_ALERT_DEFINITION(ID)"/>
        <column name="TRIGGER_ID" required="false" type="INTEGER"/>
    </table>

    <table name="EAM_ALERT" tablespace="@@@LG_DATA@@@"
        storage-options="freelists 5" cache="true" logging="false">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="ALERT_DEFINITION_ID" required="false" type="INTEGER"
                references="EAM_ALERT_DEFINITION(ID)"/>
        <column name="CTIME" required="true" type="LONG"/>
        <index name="ALERT_IDX_TIME" unique="false">
            <field ref="CTIME" />
        </index>
        <index name="ALERT_IDX_ALERTDEFINITION" unique="false">
            <field ref="ALERT_DEFINITION_ID" />
        </index>
    </table>

    <table name="EAM_ALERT_CONDITION_LOG" tablespace="@@@LG_DATA@@@"
        storage-options="freelists 5" cache="true" logging="false">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="ALERT_ID" required="false" type="INTEGER"
                references="EAM_ALERT(ID)"/>
        <column name="CONDITION_ID" required="false" type="INTEGER"
                references="EAM_ALERT_CONDITION(ID)" />
        <column name="VALUE" required="false" size="250" type="VARCHAR2"/>
        <index name="ALERT_COND_LOG_IDX">
            <field ref="ALERT_ID" />
        </index>
    </table>

    <table name="EAM_ALERT_ACTION_LOG" tablespace="@@@LG_DATA@@@"
        storage-options="freelists 5" cache="true" logging="false">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="ALERT_ID" required="false" type="INTEGER"
                references="EAM_ALERT(ID)"/>
        <column name="ACTION_ID" required="true" type="INTEGER"
                references="EAM_ACTION(ID)"/>
        <column name="DETAIL" required="true" size="500" type="VARCHAR2"/>
        <index name="ALERT_ACTION_LOG_IDX">
            <field ref="ALERT_ID" />
        </index>
    </table>

    <table name="EAM_EVENT_LOG">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="DETAIL" required="true" size="500" type="VARCHAR2"/>
        <column name="TYPE" required="true" size="100" type="VARCHAR2"/>
        <column name="TIMESTAMP" required="true" type="LONG"/>
        <column name="ENTITY_ID" required="false" type="INTEGER"/>
        <column name="ENTITY_TYPE" required="false" type="INTEGER"/>
        <column name="SUBJECT" required="false" size="100" type="VARCHAR2"/>
        <column name="STATUS" required="false" size="100" type="VARCHAR2"/>
        <index name="EVENT_LOG_IDX" unique="false">
            <field ref="ENTITY_TYPE" />
            <field ref="ENTITY_ID" />
            <field ref="TIMESTAMP" />
        </index>
    </table>

    <table name="EAM_USER_ALERT">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="USER_ID" required="true" type="INTEGER" />
        <column name="ALERT_ID" required="false" type="INTEGER"
                references="EAM_ALERT(ID)"/>
        <index name="USER_ALERT_IDX">
            <field ref="USER_ID" />
        </index>
    </table>

    <table name="EAM_EVENT">
        <column name="ID" default="sequence-only" initial="10001"
                primarykey="true" required="true" type="LONG"/>
        <column name="EVENT_OBJECT" required="true" type="BYTES"/>
        <column name="CTIME" required="true" type="LONG"/>
    </table>

    <table name="EAM_TRIGGER_EVENT">
        <column name="TRIGGER_ID" required="true" type="INTEGER"/>
        <column name="EVENT_ID" required="true" type="LONG"
                references="EAM_EVENT(ID)"/>
        <column name="EXPIRATION" required="false" type="LONG"/>
        <index name="EAM_TRIGGER_EVENT_REF" unique="true">
            <field ref="TRIGGER_ID" />
            <field ref="EVENT_ID" />
        </index>
    </table>

    <table name="EAM_FIRED_TRIGGER">
        <column name="ID" default="autoincrement" initial="10001"
                primarykey="true" required="true" type="INTEGER"/>
        <column name="TRIGGER_ID" required="true" type="INTEGER"/>
        <column name="TIMESTAMP" required="true" type="LONG"/>
        <index name="EAM_FIRED_TRIGGER_ID_IND">
            <field ref="TRIGGER_ID" />
        </index>
    </table>

</Covalent.DBSetup>
