<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Hyperic HQ 4.0 Documentation :  ui-HQHealth</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Hyperic HQ 4.0 Documentation :  ui-HQHealth
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 17, 2009 by <font color="#0050B2">mmcgarry</font>.
				    </div>


<h1><a name="ui-HQHealth-HQHealth"></a><a name="ui-HQHealth-top"></a>HQ Health</h1>

<p><b>Available in HQ Open Source unless marked by <font color="red">*</font> for HQ Enterprise only</b></p>
<p>This screen provides real-time diagnostic data for the machine on which the HQ Server is installed. This data is mostly useful for HQ Support to troubleshoot problems with the system and is not intended for customers to use on their own. This screen is available to Administrators only.</p>

<p>This screen displays statistics from HQ's internal caches. For information about modifying cache settings, see <a href="http://support.hyperic.com/confluence/display/DOC/Configuring+HQ+for+Large+Environments+and+Improved+Performance#ConfiguringHQforLargeEnvironmentsandImprovedPerformance-ConfigureHQCacheSettingsforImprovedPerformance">Configure HQ Cache Settings for Improved Performance.</a></p>
<ul>
	<li><a href="#ui-HQHealth-Tasks">Tasks</a> available on this screen</li>
	<li><a href="#ui-HQHealth-Sections">Sections</a> on this screen</li>
	<li><a href="#ui-HQHealth-Navigating">Navigating</a> via the masthead menu</li>
</ul>


<p><em>If you have any comments or suggestions for this help page, please submit them at the bottom of the page by clicking <b>Add Comment</b>.</em></p>
<p><a name="ui-HQHealth-Tasks"></a></p>

<h3><a name="ui-HQHealth-TasksAvailableonThisScreen"></a>Tasks Available on This Screen</h3>

<p>On this screen, users can do one thing: print the displayed diagnostic data.</p>

<p><b>To print the diagnostic data:</b></p>
<ul>
	<li>Click <b>Print</b>, located under the statistics displayed in the top of the page, in the center.</li>
</ul>


<p>Gathering all the data to be printed might take a few moments. When that is done, a simple text display of the statistics are displayed in a browser window, from which you can easily print.</p>

<p><a href="#ui-HQHealth-top"><em>back to top</em></a></p>

<p><a name="ui-HQHealth-Sections"></a></p>

<h3><a name="ui-HQHealth-SectionsonthisScreen"></a>Sections on this Screen</h3>

<p>The top of the screen displays standard health statistics for a server. Below are three tabs that display more data about the state of the server and database:</p>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Tab </th>
<th class='confluenceTh'> What Data It Displays </th>
</tr>
<tr>
<td class='confluenceTd'> Diagnostics </td>
<td class='confluenceTd'> This tab contains the information that HQ prints to log files every 15 minutes. You can choose these diagnostics from the drop-down list.&nbsp; <br clear="all" />
<ul>
	<li>Batch Aggregate AvailabilityInserter<font color="red">&#42;</font>: Status of queue for availability updates to database. Available only if using the Batch Aggregate inserter.</li>
	<li>Batch Aggregate DataInserter<font color="red">&#42;</font>: Status of queue for metric updates to the database. Available only if using the Batch Aggregate inserter.</li>
	<li>Event Tracker Stats: Shows minimum, maximum, and average invocation times, and the number of invocations since since the HQ server last started.</li>
	<li>EhCache: Size and hit ratio of HQ caches.</li>
	<li>Metric Reports Stats: A running average of how fast metrics are being pushed into the database.</li>
	<li>ZEvents: Status of the internal BUS.</li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'> <a name="ui-HQHealth-cache"></a> Cache </td>
<td class='confluenceTd'> The same data (less the "Bytes" column) displayed in the EhCache display in the Diagnostics tab, but in a more easily viewable format. This tab's data can be sorted. </td>
</tr>
<tr>
<td class='confluenceTd'> Load </td>
<td class='confluenceTd'> Current load on HQ Server, including: <br clear="all" />
<br clear="all" />
<ul>
	<li>Metrics collected per minute</li>
	<li>Platforms</li>
	<li>CPUs</li>
	<li>Agents</li>
	<li>Active Agents</li>
	<li>Servers</li>
	<li>Services</li>
	<li>Applications</li>
	<li>Roles</li>
	<li>Users</li>
	<li>Alerts</li>
	<li>Resources</li>
	<li>Resource Types</li>
	<li>Groups</li>
	<li>Escalations</li>
	<li>Active Escalations</li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'> Database </td>
<td class='confluenceTd'> Actions
<ul>
	<li>Purge AIQ Data - Deletes the contents of the auto-discovery queue. This is useful if the queue contains resources that for some reason cannot be imported.&nbsp; Deleting resources from the queue will cause the agent to re-discover them.</li>
	<li>Purge Stalled Executions - Deletes escalations that are stall for some reason.&nbsp; Queries</li>
	<li>AutoInventory IPs</li>
	<li>AutoInventory Platforms&nbsp;</li>
	<li>AutoInventory Servers</li>
	<li>Orphaned AlertDef Count (See <a href="#ui-HQHealth-OrphanedDatabaseRows">Orphaned Database Rows</a>)</li>
	<li>Orphaned Audit Count (See <a href="#ui-HQHealth-OrphanedDatabaseRows">Orphaned Database Rows</a>)</li>
	<li>Stalled Escalations</li>
	<li>Orphaned Group Count (See <a href="#ui-HQHealth-OrphanedDatabaseRows">Orphaned Database Rows</a>)</li>
	<li>Postgres Locks</li>
	<li>Postgres Activity</li>
	<li>Active But Disabled Resource Alert Defs</li>
	<li>Resource Type Alert Defs with Triggers</li>
	<li>Database Version Information&nbsp; <br clear="all" /></li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'> Agents </td>
<td class='confluenceTd'> For each HQ Agent connected to the HQ Server, the following information is listed:
<ul>
	<li>FQDN - of the machine it runs on; this is the identifier of the monitored platform in HQ.</li>
	<li>Address &#45;&nbsp; The IP address upon which the agent listens for server communications.</li>
	<li>Port - The port on the agent's listen address upon which it listens for server communications. Be default, the listen port is 2144.&nbsp;</li>
	<li>Version - HQ version</li>
	<li>Build Version - HQ build</li>
	<li>Creation Time - When the platform where the agent runs was first added to HQ inventory.&nbsp;</li>
	<li>&#35; Platforms - The number of platforms the agent is monitoring. Typically this value is "1", indicated that the agent is monitoring only the platform where it runs. The value is greater, if the agent is also monitoring an an agentless device, for instance an SNMP device.&nbsp;</li>
	<li>&#35; Metrics - This is the number of metrics the agent collects. Hyperic recommends balancing the metric collection load across agents. For example, don't use a single agent to monitor every SNMP devices in your network - this would constitute a single point of failure, and the metric load might downgrade the performance of other services running on the host. .</li>
	<li>Time Offset (ms) - The system time offset between HQ Server and HQ Agent. Time synchronisation on HQ Server and HQ Agents is very important to determine the availability of platforms and services correctly. Single or double digit values are okay. Higher values indicate a problem. In this case, set up NTP-daemons on your server and agent hosts. You can monitor the NTP-daemons and set an alert on the offset value</li>
	<li>License count</li>
</ul>
</td>
</tr>
</tbody></table>

<h3><a name="ui-HQHealth-OrphanedDatabaseRows"></a>Orphaned Database Rows</h3>

<p>Interrupted database updates can result in orphaned rows in the HQ database. Orphaned rows can cause HQ exceptions.&nbsp; For example:</p>
<ul>
	<li>If the HQ database contains alert definitions that are no longer associated with a resource, trying to edit edit a resource type alert can result in a stack trace similar to:</li>
</ul>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">org.hyperic.hq.events.AlertConditionCreateException:
org.hyperic.hq.measurement.MeasurementNotFoundException: No measurement found <span class="code-keyword">for</span> 10288 with template 33434 at org.hyperic.hq.bizapp.server.session.EventsBossEJBImpl.updateAlertDefinition(EventsBossEJBImpl.java:887)</pre>
</div></div>
<ul>
	<li>If the HQ database contains orphaned resources, an exception like this may result:</li>
</ul>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">java.rmi.ServerException: RuntimeException; nested exception is: org.hyperic.hq.common.SystemException: javax.ejb.TransactionRolledbackLocalException: Error updating platform with <span class="code-keyword">new</span> AIServer data.; CausedByException is: Error updating platform with <span class="code-keyword">new</span> AIServer data. at org.jboss.ejb.plugins.LogInterceptor.handleException(LogInterceptor.java:386) at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:196) at</pre>
</div></div>
<p>The HQ Health page provides orphaned item queries for alert definitions, resources, groups, and audits.</p>

<p>If these queries indicate that there are any orphaned rows in the HQ database, contact Hyperic support for assistance in removing the orphaned rows.&nbsp;</p>

<p><a name="ui-HQHealth-Navigating"></a></p>
<h3><a name="ui-HQHealth-NavigatingviatheMastheadMenu"></a>Navigating via the Masthead Menu</h3>

<p>Main screens in Hyperic contain a masthead menu. Users can navigate to the following parts of HQ using this menu:</p>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> <b>Dashboard</b> </td>
<td class='confluenceTd'> Displays the <a href="http://support.hyperic.com/confluence/display/DOC/ui-Dashboard" title="ui-Dashboard">Dashboard</a>, the starting screen in HQ, which displays information about resource health, recent alerts, recently performed auto-discovery scan, and control actions </td>
</tr>
<tr>
<td class='confluenceTd'> <b>Resources</b> </td>
<td class='confluenceTd'> Click the menu name to access either <b>Browse</b> (takes users to the <a href="http://support.hyperic.com/confluence/display/DOC/ui-Resources" title="ui-Resources">Browse Resources</a> screen, where they can locate and navigate through information about all <a href="http://support.hyperic.com/confluence/display/DOC/Hyperic+Glossary#HypericGlossary-managedresource">managed resources</a>), <b>Currently Down</b> (takes users to the <a href="http://support.hyperic.com/confluence/display/DOC/ui-CurrentlyDown" title="ui-CurrentlyDown">Currently Down</a> screen, where they can look at all managed resources that are unavailable), <b>Nagios Availability</b> (available only when Nagios is installed), or <b>Recently Viewed</b> (provides a drop-down list of <a href="http://support.hyperic.com/confluence/display/DOC/Hyperic+Glossary#HypericGlossary-resource">resources</a> that the user has recently viewed. Selecting one of those resources takes the user to the <a href="http://support.hyperic.com/confluence/display/DOC/ui-Monitor.CurrentHealth" title="ui-Monitor.CurrentHealth">Current Health</a> screen for the resource). </td>
</tr>
<tr>
<td class='confluenceTd'> <b>Analyze</b> </td>
<td class='confluenceTd'> Click the menu name to access <b>Reporting</b> <font color="red">&#42;</font> (presents the <a href="http://support.hyperic.com/confluence/display/DOC/ui-Report.Center" title="ui-Report.Center">Reporting</a> screen, from which reports can be generated), <b>Alert Center</b> (presents the <a href="http://support.hyperic.com/confluence/display/DOC/ui-Alert.Center" title="ui-Alert.Center">Alert Center</a>, which displays a deployment wide alert summary), or <b>Event Center</b> (presents the <a href="http://support.hyperic.com/confluence/display/DOC/ui-Event.Center" title="ui-Event.Center">Event Center</a>, which displays a deployment-wide event summary). <br clear="all" /> </td>
</tr>
<tr>
<td class='confluenceTd'> <b>Administration</b> </td>
<td class='confluenceTd'> Takes users (with "Administer Hyperic HQ Server Configuration" permissions) to the <a href="http://support.hyperic.com/confluence/display/DOC/ui-Admin" title="ui-Admin">Administration</a> screen, where they can manage the system-wide settings </td>
</tr>
<tr>
<td class='confluenceTd'> <b>Search</b> <br clear="all" /> </td>
<td class='confluenceTd'> The Search box in the upper right of the Masthead allows you to search the HQ inventory for resources of any type. <br clear="all" />
<br clear="all" />
Search results appear after four characters are entered in the text box. Results will include the first 10 platforms, servers, services, and groups whose name includes the search string. <br clear="all" />  <br clear="all" />
Double-click a resource in the list to navigate to its Resource page. </td>
</tr>
</tbody></table>
<p>The masthead also displays the two most recently triggered alerts. Users can click the alert's time to be taken to the <a href="http://support.hyperic.com/confluence/display/DOC/ui-Alert.Detail" title="ui-Alert.Detail">alert detail</a>.</p>
<p><a href="#ui-HQHealth-top"><em>back to top</em></a></p>

<h5><a name="ui-HQHealth-ReturntotheHQUserInterfaceReference."></a>Return to the <a href="http://support.hyperic.com/confluence/display/DOC/HQ+User+Interface+Reference" title="HQ User Interface Reference">HQ User Interface Reference</a>.</h5>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/confluence/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Mar 02, 2009 13:37</font></td>
		    </tr>
	    </table>
    </body>
</html>