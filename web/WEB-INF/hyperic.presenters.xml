<?xml version="1.0"?>

<module id="hyperic.exceptionPresenters" version="1.0.0" package="org.hyperic.hq.ui.presenters">

    <!-- Exception Presenters -->
    <!--
    <implementation service-id="tapestry.error.ExceptionPresenter">
        <invoke-factory>
            <construct
                class="ExceptionPresenterImpl">
                <set-object property="exceptionPageName"
                    value="infrastructure:exceptionPageName" />

                <set-object property="timeOutPageName"
                    value="infrastructure:staleSessionPageName" />
                    
                <set-object property="requestExceptionReporter"
                    value="infrastructure:requestExceptionReporter" />

                <set-object property="webRequest"
                    value="infrastructure:request" />
                <set-object property="responseRenderer"
                    value="infrastructure:responseRenderer" />
            </construct>
        </invoke-factory>
    </implementation>
    -->
    
    <implementation
        service-id="tapestry.error.StaleSessionExceptionPresenter">
        <invoke-factory>
            <construct
                class="StaleExceptionPresenter">
                <set-object property="responseRenderer"
                    value="infrastructure:responseRenderer" />
                <set-object property="pageName"
                    value="infrastructure:staleSessionPageName" />
                <set-object property="request" 
                    value="service:tapestry.globals.HttpServletRequest"/>    
            </construct>
        </invoke-factory>
    </implementation>

    <implementation
        service-id="tapestry.error.StaleLinkExceptionPresenter">
        <invoke-factory>
            <construct
                class="StaleExceptionPresenter">
                <set-object property="responseRenderer"
                    value="infrastructure:responseRenderer" />
                <set-object property="pageName"
                    value="infrastructure:staleLinkPageName" />
                <set-object property="request" 
                    value="service:tapestry.globals.HttpServletRequest"/>
            </construct>
        </invoke-factory>
    </implementation>

    <contribution configuration-id="tapestry.InfrastructureOverrides">
        <!-- <property name="exceptionPageName" value="Error" /> -->
       	<property name="staleSessionPageName" value="SignIn" />
        <property name="staleLinkPageName" value="SignIn" />
    </contribution>
        
</module>
